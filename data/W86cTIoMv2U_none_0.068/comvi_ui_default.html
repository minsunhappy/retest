<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>World's smallest cat ğŸˆ- BBC</title>
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: #fff; /* í°ìƒ‰ ë°°ê²½ */
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .video-title {
      width: 800px;
      margin-top: 40px;
      margin-bottom: 5px;
      text-align: left;
      font-size: 20px;
      font-weight: 600;
      color: #000;
      padding: 0;
      line-height: 1.4;
    }

    .video-container {
      width: 800px;
      margin-top: 20px;
      position: relative;
      background-color: #000;
      overflow: hidden;
      border-radius: 20px; /* ìœ íŠœë¸Œ ëŠë‚Œì˜ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      transition: all 0.3s ease;
    }

    video {
      width: 100%;
      display: block;
      object-fit: cover;
      border-radius: 12px; /* ë¹„ë””ì˜¤ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
    }

    /* ê¸°ë³¸ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ ì™„ì „íˆ ìˆ¨ê¸°ê¸° */
    video::-webkit-media-controls-panel { display: none !important; }
    video::-webkit-media-controls-play-button { display: none !important; }
    video::-webkit-media-controls-start-playback-button { display: none !important; }
    video::-moz-media-controls { display: none !important; }
    video::--ms-media-controls { display: none !important; }

    /* ì»¤ìŠ¤í…€ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.8);
      padding: 4px 15px 4px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 4;
      border-radius: 0 0 12px 12px;
    }

    .video-container:hover .custom-controls { opacity: 1; }

    /* ì§„í–‰ ë°” ì»¨í…Œì´ë„ˆ */
    .progress-container {
      width: 100%;
      height: 3px;
      background: rgba(255,255,255,0.3);
      border-radius: 3px;
      margin-bottom: 6px;
      position: relative;
      cursor: pointer;
    }

    /* ì§„í–‰ ë°” */
    .progress-bar {
      height: 100%;
      background: #ff0000;
      border-radius: 3px;
      width: 0%;
      position: relative;
      transition: width 0.1s ease;
    }

    /* ì§„í–‰ ë°” ë ë™ê·¸ë¼ë¯¸ */
    .progress-handle {
      position: absolute;
      right: -8px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      background: #ff0000;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .progress-container:hover .progress-handle { opacity: 1; }

    /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ */
    .controls-bottom {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .control-button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 8px;
      border-radius: 3px;
      transition: background-color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-button:hover { background-color: rgba(255,255,255,0.2); }

    .control-button svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    /* ì‹œê°„ í‘œì‹œ */
    .time-display {
      color: white;
      font-size: 13px;
      font-weight: 500;
    }

    /* ===================== ëŒ“ê¸€ ì˜¤ë²„ë ˆì´ (A ìŠ¤íƒ€ì¼) ===================== */
    .comments-overlay {
      --overlay-h: 180;             /* JSì—ì„œ ë™ì  ì¡°ì • */
      --controls-offset: 50px;        /* ì»¨íŠ¸ë¡¤ ë³´ì¼ ë•Œ ìœ„ë¡œ ì˜¬ë¦´ ê±°ë¦¬ */
      position: absolute;
      bottom: 0;
      left: 0; right: 0;
      height: var(--overlay-h);
      pointer-events: none;
      z-index: 2;
      background: linear-gradient(to top, rgba(0,0,0,0.80), rgba(0,0,0,0.5) 40%, rgba(0,0,0,0.2) 90%,  rgba(0,0,0,0));
      overflow: hidden;
      transition: bottom 0.3s ease, height 0.15s ease;
    }

    /* ì»¨íŠ¸ë¡¤ì´ ë³´ì¼ ë•Œ ëŒ“ê¸€ ì˜¤ë²„ë ˆì´ë¥¼ ìœ„ë¡œ ì´ë™ */
    .video-container:hover .comments-overlay { bottom: var(--controls-offset); }

    /* ì‹¤ì œ ëŒ“ê¸€ ì»¨í…Œì´ë„ˆì— mask-image ì ìš© (ê°€ë³€ stop) */
    .comments-container {
      position: relative;
      width: 100%;
      height: 100%;
      --mask-stop: 100%; /* JSì—ì„œ ë™ì  ë³€ê²½ */
      -webkit-mask-image: linear-gradient(to top, black var(--mask-stop), transparent 100%);
      mask-image: linear-gradient(to top, black var(--mask-stop), transparent 100%);
    }

    /* ì¢‹ì•„ìš”/í•˜íŠ¸ë¥¼ ë³„ë„ ë ˆì´ì–´ë¡œ ë¶„ë¦¬í•˜ì—¬ ë§ˆìŠ¤í¬ ì˜í–¥ ì œê±° */
    .likes-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 3;
    }

    .like-item {
      position: absolute;
      right: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      transition: opacity 0.3s ease;
    }

    /* ê° ëŒ“ê¸€ ìš”ì†Œ */
    .live-comment {
      position: absolute;
      left: 16px;
      right: 16px;
      color: #fff;
      display: flex;
      align-items: center;
      transition: bottom 0.2s ease, opacity 0.3s ease-in-out;
    }

    /* ëŒ“ê¸€ ë‚´ìš© ë ˆì´ì•„ì›ƒ */
    .comment-content { display: flex; align-items: flex-start; width: 100%; }

    .text-content { flex: 1; }

    .user-info { display: flex; align-items: center; gap: 4px; margin-bottom: 2px; }

    .username { font-weight: normal; font-size: 24px; }

    .comment-text {
      font-size: 34px;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: anywhere;
      flex: 1;
    }

    .profile-icon { width: 28px; height: 28px; border-radius: 50%; flex-shrink: 0; }
    .profile-photo { width: 28px; height: 28px; border-radius: 50%; flex-shrink: 0; }

    .likes { display: flex; flex-direction: column; align-items: center; align-self: flex-start; gap: 2px; margin-left: 8px;}

    .heart-icon { 
      width: 28px; 
      height: 28px; 
      fill: #ff0000; 
      opacity: 1;
      -webkit-mask-image: none !important;
      mask-image: none !important;
    }

    .likes-number { 
      color: #ff0000; 
      font-size: 26px; 
      opacity: 1;
      -webkit-mask-image: none !important;
      mask-image: none !important;
    }
  </style>
</head>
  <body>
    <!-- ì œëª©ì„ ì˜ìƒ ìœ„ì— ë°°ì¹˜ -->
    <div class="video-title">World's smallest cat ğŸˆ- BBC</div>
    <div class="video-container">
    <video id="video-player">
      <source src="../video/W86cTIoMv2U.mp4" type="video/mp4" />
      ë¸Œë¼ìš°ì €ê°€ video íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </video>

    <!-- ì»¤ìŠ¤í…€ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ (A ìŠ¤íƒ€ì¼: í”Œë ˆì´/ì¼ì‹œì •ì§€ + ì§„í–‰ë°” + ì‹œê°„ë§Œ) -->
    <div class="custom-controls">
      <div class="progress-container" id="progress-container">
        <div class="progress-bar" id="progress-bar">
          <div class="progress-handle"></div>
        </div>
      </div>
      <div class="controls-bottom">
        <button class="control-button" id="play-pause-btn">
          <svg id="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg id="pause-icon" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <div class="time-display" id="time-display">0:00 / 0:00</div>
      </div>
    </div>

    <!-- ëŒ“ê¸€ ì˜¤ë²„ë ˆì´ (A ìŠ¤íƒ€ì¼: ë†’ì´/ë§ˆìŠ¤í¬ ë™ì ) -->
    <div class="comments-overlay" id="comments-overlay">
      <div class="comments-container" id="comments-container"></div>
      <div class="likes-overlay" id="likes-overlay"></div>
    </div>
  </div>

  <script>
    // ìˆ«ì í¬ë§·: 1k ë‹¨ìœ„
    function formatLikes(n){
      if(n < 1000) return n.toString();
      let f = (n/1000).toFixed(1);
      if(f.endsWith('.0')) f = f.slice(0,-2);
      return f + 'k';
    }

    // mm:ss
    function formatTime(sec){
      const m = Math.floor(sec/60);
      const s = Math.floor(sec%60).toString().padStart(2,'0');
      return `${m}:${s}`;
    }

    // ëœë¤ ì‚¬ìš©ìëª…/ìƒ‰ìƒ
    function getRandomName(){
      const names = ["Alice","Bob","Charlie","David","Eva","Frank","Grace","Helen","Ivy","Jack"];
      return names[Math.floor(Math.random()*names.length)];
    }
    function getRandomColor(){
      const letters = '0123456789ABCDEF';
      let color = '#';
      for(let i=0;i<6;i++){ color += letters[Math.floor(Math.random()*16)]; }
      return color;
    }

    // ì„œë²„ì—ì„œ ì£¼ì…ë˜ëŠ” ìµœì  ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸
    var optimalComments = [{"start": 0, "end": 2, "reading time": 2.0, "text": "You noobs it's a hologram.", "reward": 2.8759748423987457, "correlation": "0.3033178499156952", "corr_A": "0.0", "corr_V": "0.36", "likes": 30.0, "norm_likes": 0.8313517213679825, "norm_likes_real": 0.8313517213679825, "photo": "https://yt3.ggpht.com/ytc/AIdro_m170x3H16YVqo7LAxX3GE1aAF6zxIS10WntTZk2bh6YPk=s88-c-k-c0x00ffffff-no-rj", "author": "@tracepillar8382", "slot": 0}, {"start": 2, "end": 4, "reading time": 2.0, "text": "Just a more kitteny kitten.", "reward": 3.555495563885319, "correlation": "0.41777225635651344", "corr_A": "0.0", "corr_V": "0.49", "likes": 225.0, "norm_likes": 0.9422032692296326, "norm_likes_real": 0.9422032692296326, "photo": "https://yt3.ggpht.com/ytc/AIdro_kktt7416VmhgzcMCnqpcre-ZR-INnAPmLOA8X0FoqmxGg=s88-c-k-c0x00ffffff-no-rj", "author": "@cyancyborg1477", "slot": 0}, {"start": 4, "end": 7, "reading time": 3.0, "text": "World's smallest Beautiful Baby Cat.", "reward": 7.215531945815281, "correlation": "0.7884316172221467", "corr_A": "0.85", "corr_V": "0.39", "likes": 29.0, "norm_likes": 0.8283140808274668, "norm_likes_real": 0.8283140808274668, "photo": "https://yt3.ggpht.com/ytc/AIdro_k0Vfb2ux71pLQrfP5Q8_NCflN5Kazenm3YvQA2tNM=s88-c-k-c0x00ffffff-no-rj", "author": "@bergamotblonde", "slot": 0}, {"start": 7, "end": 11, "reading time": 4.0, "text": "World's smallest cat, more like world's cutest cat.", "reward": 10.074720478297309, "correlation": "0.7698862730993852", "corr_A": "0.82", "corr_V": "0.39", "likes": 1400.0, "norm_likes": 0.978907573375557, "norm_likes_real": 0.978907573375557, "photo": "https://yt3.ggpht.com/ytc/AIdro_mtBJVbwzM-ArNkWWvP-jKduCegfRKinJE3eNSmgac4Y7Y=s88-c-k-c0x00ffffff-no-rj", "author": "@tremendous1163", "slot": 0}, {"start": 11, "end": 17, "reading time": 6.0, "text": "If this is how small an adult rusty spotted cat is, imagine a newborn one-", "reward": 15.275065934300505, "correlation": "0.7780026803635782", "corr_A": "0.69", "corr_V": "0.61", "likes": 4800.0, "norm_likes": 0.9898389616562612, "norm_likes_real": 0.9898389616562612, "photo": "https://yt3.ggpht.com/ytc/AIdro_kIyspN_lp_DtHPCtJlgz-JcHMRY2qbs4q2kqKE5NihcgA=s88-c-k-c0x00ffffff-no-rj", "author": "@floraleclipse6160", "slot": 0}, {"start": 17, "end": 23, "reading time": 6.0, "text": "He may look like a kitten   Cat:*proceeds to meow the tiniest meow*  Everyone else: Are you sure about that", "reward": 15.550141937801243, "correlation": "0.8087985076347035", "corr_A": "0.78", "corr_V": "0.56", "likes": 973.0, "norm_likes": 0.974093307697467, "norm_likes_real": 0.974093307697467, "photo": "https://yt3.ggpht.com/OH-wgPPl1WGPjpZqsSPS747DEPzc-yog5UAs3599gt1guIeA0X1IdfBbYjJKci2lh6qRF0zGRQ=s88-c-k-c0x00ffffff-no-rj", "author": "@thattinykoala", "slot": 0}, {"start": 23, "end": 28, "reading time": 5.0, "text": "Speaker: he'd still fit in the palm of your hand. Me: looks at my palm", "reward": 11.333890869482651, "correlation": "0.6407551167543063", "corr_A": "0.76", "corr_V": "0.05", "likes": 2600.0, "norm_likes": 0.9852679403879181, "norm_likes_real": 0.9852679403879181, "photo": "https://yt3.ggpht.com/zCYbuNJFlgGaDCiPQZudrdhnVzEY1EMSWEipit-F3p_NztXH9qwYZgAw5-7_u2RSJ2n_SFO5Mmo=s88-c-k-c0x00ffffff-no-rj", "author": "@xadezkreator", "slot": 0}, {"start": 28, "end": 34, "reading time": 6.0, "text": "Narrator: But this little male is very nearly fully grown The little cat: *exits from under a leaf*", "reward": 14.663120635215115, "correlation": "0.7247009931169385", "corr_A": "0.68", "corr_V": "0.53", "likes": 12000.0, "norm_likes": 0.9944514529686421, "norm_likes_real": 0.9944514529686421, "photo": "https://yt3.ggpht.com/ytc/AIdro_loPhDuemtI-YH1OZ82REj63Ym-Mls96OH2Ojw5S5IOuw=s88-c-k-c0x00ffffff-no-rj", "author": "@francesco6835", "slot": 0}, {"start": 34, "end": 40, "reading time": 6.0, "text": "\"he'll soon be setting off on a solitary life, fending entirely for him self\" Can relate", "reward": 13.935421831916688, "correlation": "0.6722853959469031", "corr_A": "0.79", "corr_V": "0.1", "likes": 1300.0, "norm_likes": 0.977999513425642, "norm_likes_real": 0.977999513425642, "photo": "https://yt3.ggpht.com/ytc/AIdro_kdTxYe0q9fdUHi4a5LMLIMAvUtJneVJKwSkOZ70hdL7g=s88-c-k-c0x00ffffff-no-rj", "author": "@legokangaroo5010", "slot": 0}, {"start": 40, "end": 46, "reading time": 6.0, "text": "This cat is so polite, it didnâ€™t disturb the leaf and just gently jumped over it.", "reward": 11.06555373226299, "correlation": "0.42949550749462345", "corr_A": "0.0", "corr_V": "0.51", "likes": 2600.0, "norm_likes": 0.9852679403879181, "norm_likes_real": 0.9852679403879181, "photo": "https://yt3.ggpht.com/A2pkG3t2ZouJfFX_n66wdDbnLPCB4SPA_JnE1I-NSNyx6e0E7-cILKahQFbSWIJ3NgYyTmopvw=s88-c-k-c0x00ffffff-no-rj", "author": "@brown_chicken", "slot": 0}, {"start": 46, "end": 50, "reading time": 4.0, "text": "what he lacks in size... he makes up for... in cuteness", "reward": 8.743021641527701, "correlation": "0.596989368527244", "corr_A": "0.7", "corr_V": "0.06", "likes": 6700.0, "norm_likes": 0.9917766733274372, "norm_likes_real": 0.9917766733274372, "photo": "https://yt3.ggpht.com/ytc/AIdro_lWYj0tMIpnz0iFSwm1RvQMJ6ToiwiVF89eTsaVABzSNtjN=s88-c-k-c0x00ffffff-no-rj", "author": "@gwyneththeobald2736", "slot": 0}, {"start": 50, "end": 56, "reading time": 6.0, "text": "\"what he lacks in size, he makes up in daring \"  puts paw gently in the water  Extremely daring ğŸ’•ğŸ’•ğŸ˜©", "reward": 12.738970370756856, "correlation": "0.5665964805257899", "corr_A": "0.44", "corr_V": "0.51", "likes": 4900.0, "norm_likes": 0.9899687674078962, "norm_likes_real": 0.9899687674078962, "photo": "https://yt3.ggpht.com/qaDstUlSN4yZJ-8_M3cu6ZxlLyrWziBmYYx5AQ5aZ5DXIqY2PEYTCuW1wUfzKM5YNWN8YDuLEQ=s88-c-k-c0x00ffffff-no-rj", "author": "@comicsandanimation5531", "slot": 0}, {"start": 56, "end": 61, "reading time": 5.0, "text": "Narrator: they are daring Tiny cat: waddles through a tiny puddle", "reward": 8.814207415241038, "correlation": "0.3919669548363252", "corr_A": "0.0", "corr_V": "0.46", "likes": 1400.0, "norm_likes": 0.978907573375557, "norm_likes_real": 0.978907573375557, "photo": "https://yt3.ggpht.com/vB9SZwbFXi1-jyinW-f4DYP-3mNITT2mHA82Va5Y_81NfCpENaUh24pESx-Zp7x1QBmYfmvPhVE=s88-c-k-c0x00ffffff-no-rj", "author": "@joshyookphotography", "slot": 0}, {"start": 61, "end": 67, "reading time": 6.0, "text": "\"What he lacks in size he makes up for in daring\" touches water, instantly pulls paw back", "reward": 11.157492929974136, "correlation": "0.43892168497645784", "corr_A": "0.0", "corr_V": "0.52", "likes": 1800.0, "norm_likes": 0.9817387850427737, "norm_likes_real": 0.9817387850427737, "photo": "https://yt3.ggpht.com/ytc/AIdro_ki8h8-XQeN_pIYmXPo6xWggze7kwRYAbchJF6sY3Y=s88-c-k-c0x00ffffff-no-rj", "author": "@Ithilwen22", "slot": 0}, {"start": 67, "end": 73, "reading time": 6.0, "text": "Young cats are curious...that's how they learn about the world  P A R K O U R", "reward": 14.265314644638384, "correlation": "0.7407382434434561", "corr_A": "0.87", "corr_V": "0.13", "likes": 75.0, "norm_likes": 0.8960759538861516, "norm_likes_real": 0.8960759538861516, "photo": "https://yt3.ggpht.com/ruVazuTZN92Xox6Hs-xyVygppqjt29ubu-azXumNNjjwaGYx-4bT_-tf6uDYeibYKT520dauUA=s88-c-k-c0x00ffffff-no-rj", "author": "@Madam2034", "slot": 0}, {"start": 73, "end": 77, "reading time": 4.0, "text": "\"It's how they learn about the world.\"  Cat: big jump", "reward": 8.209126832408387, "correlation": "0.534266808584909", "corr_A": "0.59", "corr_V": "0.23", "likes": 2200.0, "norm_likes": 0.9837480909322786, "norm_likes_real": 0.9837480909322786, "photo": "https://yt3.ggpht.com/ytc/AIdro_nx131Wgo7-TdCmI4RYULJ6HGXlKCk6Tmf5oO-QTaNts8c=s88-c-k-c0x00ffffff-no-rj", "author": "@spoop4967", "slot": 0}, {"start": 77, "end": 78, "reading time": 1.0, "text": "It is Animated", "reward": 1.1226419205825318, "correlation": "0.34314778442434873", "corr_A": "0.0", "corr_V": "0.41", "likes": 3.0, "norm_likes": 0.4363463517338342, "norm_likes_real": 0.4363463517338342, "photo": "https://yt3.ggpht.com/ytc/AIdro_kIV24dHwX539XhRaPjCga76wgUZF6PKWHOOu8kYfSVVO0=s88-c-k-c0x00ffffff-no-rj", "author": "@MoarPower", "slot": 0}, {"start": 78, "end": 82, "reading time": 4.0, "text": "â€œEven if it can get them into troubleâ€  â€œMEEEOWWWWâ€", "reward": 8.510406649812055, "correlation": "0.5776352861430386", "corr_A": "0.68", "corr_V": "0.06", "likes": 865.0, "norm_likes": 0.9723310901669365, "norm_likes_real": 0.9723310901669365, "photo": "https://yt3.ggpht.com/ytc/AIdro_mcgT7v2hdsQvC0DtWeZuBPhbShlf-a_JFO3Wuujrddjg=s88-c-k-c0x00ffffff-no-rj", "author": "@toxic10g77", "slot": 0}, {"start": 82, "end": 88, "reading time": 6.0, "text": "I wonder how much of this is set up. Are the leaves placed there to make the cat look smaller. Is it just another fake session like the Polar Bear den footage, or the fake tree houses of native peoples that have been exposed. I struggle to believe BBC footage these days because they have been caught out in so many cheats.", "reward": 11.024472802131669, "correlation": "0.4532936188736346", "corr_A": "0.0", "corr_V": "0.54", "likes": 161.0, "norm_likes": 0.930824895941342, "norm_likes_real": 0.930824895941342, "photo": "https://yt3.ggpht.com/ytc/AIdro_k6cz_D7v3Xg7KJb2qnBC1ciHff1kIPcfuuxS2MYod-Xw=s88-c-k-c0x00ffffff-no-rj", "author": "@TheRealMythril", "slot": 0}, {"start": 88, "end": 93, "reading time": 5.0, "text": "\"Straight away he puts his super senses through their paces\" Act cute", "reward": 11.198471423646856, "correlation": "0.6707390441251159", "corr_A": "0.78", "corr_V": "0.15", "likes": 78.0, "norm_likes": 0.8982161964791396, "norm_likes_real": 0.8982161964791396, "photo": "https://yt3.ggpht.com/HqKL7xhHe_AVbrns__uQSBjaw5dM9SN6uB20G1KUvF-hXxNfi2j_ddFodTWlBJK80WM266x8Kg=s88-c-k-c0x00ffffff-no-rj", "author": "@Sari-ie2kd", "slot": 0}, {"start": 93, "end": 96, "reading time": 3.0, "text": "Video title : world's biggest leaves", "reward": 5.092631484489576, "correlation": "0.3554061082283428", "corr_A": "0.0", "corr_V": "0.42", "likes": 3100.0, "norm_likes": 0.9867316117065065, "norm_likes_real": 0.9867316117065065, "photo": "https://yt3.ggpht.com/6-yMf6KZiD0DEWoySuVdKFlBuNK266jXujPfQT_Ap0jMgwvkR_nZAw1x8WP54gLp9f5hkQP6=s88-c-k-c0x00ffffff-no-rj", "author": "@LaalBaigStudios", "slot": 0}, {"start": 96, "end": 101, "reading time": 5.0, "text": "Plot twist: The cat is normal size this is just a gigantic forest.", "reward": 9.770696889260522, "correlation": "0.4846082440218575", "corr_A": "0.0", "corr_V": "0.57", "likes": 2500.0, "norm_likes": 0.9849228898083893, "norm_likes_real": 0.9849228898083893, "photo": "https://yt3.ggpht.com/ytc/AIdro_n-eFnDZ8rRq5uoqzeSKjKAsMwuCq3cnKJ9JANYjM_nxg=s88-c-k-c0x00ffffff-no-rj", "author": "@MrTaunus007", "slot": 0}, {"start": 101, "end": 106, "reading time": 5.0, "text": "â€œHis eyes are 6 times more powerful than our ownâ€  I feel blind now", "reward": 12.103200959381532, "correlation": "0.7296524730443672", "corr_A": "0.85", "corr_V": "0.12", "likes": 472.0, "norm_likes": 0.9613352457875719, "norm_likes_real": 0.9613352457875719, "photo": "https://yt3.ggpht.com/T4MKVdllqZjNE_wdvlLHTtzRKnHA9ppHBk3cvYGzzQvbLHeoE9wHnk8hnQmA8MuYaNAnkS_u2A=s88-c-k-c0x00ffffff-no-rj", "author": "@Hxpnoticghost", "slot": 0}, {"start": 106, "end": 109, "reading time": 3.0, "text": "\"He may look like a kitten\" Cat: M A E W", "reward": 6.082057810546903, "correlation": "0.5174634130006508", "corr_A": "0.29", "corr_V": "0.54", "likes": 7600.0, "norm_likes": 0.9924257775143327, "norm_likes_real": 0.9924257775143327, "photo": "https://yt3.ggpht.com/ytc/AIdro_limOMP9ISS-kBdfMhG3t4X8A_wVoTkQh5I5eWB0N8=s88-c-k-c0x00ffffff-no-rj", "author": "@annageerdsema4047", "slot": 0}, {"start": 109, "end": 115, "reading time": 6.0, "text": "\"....and sensitive to the slightest movements\" And you never wondered why the video ended right then n there.", "reward": 12.90547478753017, "correlation": "0.6226238083455634", "corr_A": "0.71", "corr_V": "0.2", "likes": 90.0, "norm_likes": 0.905664847897235, "norm_likes_real": 0.905664847897235, "photo": "https://yt3.ggpht.com/WoyAjjiEme9fRTXgd2z6AF_xThVM3B-qA6NWQrGcaXwEQCdUEbFjFk4slqXEhZYXn3Wdxh_EPCA=s88-c-k-c0x00ffffff-no-rj", "author": "@awayfrom234........", "slot": 0}];

    // ìš”ì†Œ ì°¸ì¡°
    var video=null, commentsContainer=null, commentsOverlay=null, likesOverlay=null;
    var playPauseBtn=null, playIcon=null, pauseIcon=null;
    var progressContainer=null, progressBar=null;
    var timeDisplay=null;

    var isDragging=false;

    document.addEventListener('DOMContentLoaded', function(){
      video = document.getElementById('video-player');
      commentsContainer = document.getElementById('comments-container');
      commentsOverlay = document.getElementById('comments-overlay');
      likesOverlay = document.getElementById('likes-overlay');
      playPauseBtn = document.getElementById('play-pause-btn');
      playIcon = document.getElementById('play-icon');
      pauseIcon = document.getElementById('pause-icon');
      progressContainer = document.getElementById('progress-container');
      progressBar = document.getElementById('progress-bar');
      timeDisplay = document.getElementById('time-display');

      // start ê¸°ì¤€ ì •ë ¬
      optimalComments.sort((a,b)=>a.start-b.start);

      // ì´ë²¤íŠ¸ ë°”ì¸ë”©
      video.addEventListener('timeupdate', onTimeUpdate);
      video.addEventListener('loadedmetadata', ()=>{ updateTimeDisplay(); recalcOverlayByComments(); });
      video.addEventListener('play', updatePlayPauseButton);
      video.addEventListener('pause', updatePlayPauseButton);

      playPauseBtn.addEventListener('click', togglePlayPause);
      progressContainer.addEventListener('click', seekVideo);
      progressContainer.addEventListener('mousedown', startDrag);
      document.addEventListener('mousemove', doDrag);
      document.addEventListener('mouseup', endDrag);

      window.addEventListener('resize', recalcOverlayByComments);

      // ì´ˆê¸° ìƒíƒœ
      updatePlayPauseButton();
    });

    function togglePlayPause(){ if(video.paused) video.play(); else video.pause(); }
    function updatePlayPauseButton(){
      if(video.paused){ playIcon.style.display='block'; pauseIcon.style.display='none'; }
      else { playIcon.style.display='none'; pauseIcon.style.display='block'; }
    }

    function updateTimeDisplay(){
      if(!video.duration) return;
      const cur = formatTime(video.currentTime);
      const tot = formatTime(video.duration);
      timeDisplay.textContent = `${cur} / ${tot}`;
    }

    function onTimeUpdate(){
      const t = video.currentTime;
      // ì§„í–‰ë°”
      if(video.duration){ progressBar.style.width = ((t/video.duration)*100) + '%'; }
      updateTimeDisplay();

      // ëŒ“ê¸€ í‘œì‹œ/ì œê±°
      optimalComments.forEach(function(cmt, idx){
        var el = document.getElementById('comment-'+idx);
        if(cmt.start <= t && t < cmt.end){
          if(!el) addLiveComment(cmt, idx);
        } else if(el && t >= cmt.end){
          // í˜ì´ë“œ ì•„ì›ƒ í›„ ì œê±°, likesë„ í•¨ê»˜ ì œê±°
          el.style.opacity = '0';
          var likeEl = document.getElementById('like-'+idx);
          if(likeEl) likeEl.style.opacity = '0';
          setTimeout(()=>{
            if(el && el.parentNode) el.remove();
            if(likeEl && likeEl.parentNode) likeEl.remove();
            recalcOverlayByComments();
          }, 300);
        }
      });
      // ìœ„ì¹˜ ë™ê¸°í™”
      syncLikesPositions();
    }

    function startDrag(e){ isDragging=true; e.preventDefault(); updateVideoTime(e); }
    function doDrag(e){ if(!isDragging) return; e.preventDefault(); updateVideoTime(e); }
    function endDrag(){ isDragging=false; }
    function seekVideo(e){ if(e.type==='click'){ setTimeout(()=>{ if(!isDragging) updateVideoTime(e); },10); } }
    function updateVideoTime(e){
      const rect = progressContainer.getBoundingClientRect();
      const pos = Math.max(0, Math.min(1, (e.clientX - rect.left)/rect.width));
      video.currentTime = pos * video.duration;
    }

    function addLiveComment(cmt, idx){
      var div = document.createElement('div');
      div.className = 'live-comment';
      div.id = 'comment-' + idx;

      var user = cmt.author || cmt.user || getRandomName();
      var txt = cmt.text || '';
      var likes = (cmt.likes !== undefined) ? cmt.likes : 0;
      var profileColor = getRandomColor();
      var photo = cmt.photo;

      div.innerHTML = `
        <div class="comment-content">
          <div class="text-content">
            <div class="user-info">
              ${photo ? `<img class="profile-photo" src="${photo}" alt="Profile" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" />` : ''}
              <div class="profile-icon" style="background-color:${profileColor}; display:${photo ? 'none' : 'block'};"></div>
              <span class="username">${user}</span>
            </div>
            <span class="comment-text">${txt}</span>
          </div>
        </div>`;

      // ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ ê¸°ë³¸ê°’
      div.style.bottom = '10px';
      div.style.opacity = '0';
      commentsContainer.appendChild(div);
      // ì¢‹ì•„ìš”/í•˜íŠ¸ëŠ” ë³„ë„ ì˜¤ë²„ë ˆì´ ë ˆì´ì–´ì— ë Œë”ë§(ë§ˆìŠ¤í¬ ë¹„ì ìš©)
      var like = document.createElement('div');
      like.className = 'like-item';
      like.id = 'like-' + idx;
      like.style.bottom = '10px';
      like.style.opacity = '0';
      like.innerHTML = `
        <svg class="heart-icon" viewBox="0 0 24 24">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        <span class="likes-number">${formatLikes(likes)}</span>`;
      likesOverlay.appendChild(like);

      // ìƒì„± ì§í›„ ìœ„ì¹˜/ì—¬ë°± ê³„ì‚°ì„ ë¨¼ì € ìˆ˜í–‰í•´ ì í”„ ë°©ì§€
      placeLikeForComment(div, like);
      reserveTextSpace(div, like);

      setTimeout(()=>{ div.style.opacity='1'; like.style.opacity='1'; recalcOverlayByComments(); }, 50);
    }

    // ===== A ìŠ¤íƒ€ì¼: ëŒ“ê¸€ ê¸¸ì´ì— ë”°ë¼ ì˜¤ë²„ë ˆì´ ë†’ì´ì™€ ë§ˆìŠ¤í¬ ê°€ë³€ =====
    const OVERLAY_PADDING = 15; // í•˜ë‹¨ ì—¬ë°±
    const OVERLAY_MIN = 68;     // ìµœì†Œ ë†’ì´
    const OVERLAY_MAX_RATIO = 0.55; // ë¹„ë””ì˜¤ ë†’ì´ ëŒ€ë¹„ ìµœëŒ€ ë¹„ìœ¨
    const USERINFO_EXTRA = 16;  // user-info ë¼ì¸ ì—¬ìœ ì¹˜

    function clampOverlayHeight(px){
      const vc = document.querySelector('.video-container');
      const vh = vc?.getBoundingClientRect().height || 0;
      const maxH = vh ? Math.floor(vh * OVERLAY_MAX_RATIO) : 260;
      return Math.max(OVERLAY_MIN, Math.min(px, maxH));
    }

    function recalcOverlayByComments(){
      const visibles = Array.from(commentsContainer.querySelectorAll('.live-comment'));
      if(visibles.length === 0){
        const h = clampOverlayHeight(OVERLAY_MIN);
        commentsOverlay.style.setProperty('--overlay-h', h + 'px');
        commentsContainer.style.setProperty('--mask-stop', '35%');
        return;
      }

      let maxCardH = 0;
      visibles.forEach(el=>{ const r = el.getBoundingClientRect(); maxCardH = Math.max(maxCardH, r.height); });

      const desired = clampOverlayHeight(Math.ceil(maxCardH + OVERLAY_PADDING + USERINFO_EXTRA));
      commentsOverlay.style.setProperty('--overlay-h', desired + 'px');

      let maskStop = 45;
      if(desired > 120) maskStop = 55;
      if(desired > 160) maskStop = 65;
      if(desired > 200) maskStop = 72;
      commentsContainer.style.setProperty('--mask-stop', maskStop + '%');
      // ì¢‹ì•„ìš” ìœ„ì¹˜ ì¬ê³„ì‚°
      syncLikesPositions();
    }
    
    function syncLikesPositions(){
      if(!commentsOverlay || !commentsContainer || !likesOverlay) return;
      const overlayRect = commentsOverlay.getBoundingClientRect();
      const comments = Array.from(commentsContainer.querySelectorAll('.live-comment'));
      comments.forEach(el=>{
        const id = el.id || '';
        const idx = id.split('-')[1];
        if(idx === undefined) return;
        const likeEl = document.getElementById('like-'+idx);
        if(!likeEl) return;
        placeLikeForComment(el, likeEl, overlayRect);
        likeEl.style.opacity = getComputedStyle(el).opacity;
        reserveTextSpace(el, likeEl);
      });
    }
    
    function placeLikeForComment(commentEl, likeEl, overlayRectOpt){
      if(!commentsOverlay) return;
      const overlayRect = overlayRectOpt || commentsOverlay.getBoundingClientRect();
      const userInfo = commentEl.querySelector('.user-info');
      const targetRect = (userInfo ? userInfo.getBoundingClientRect() : commentEl.getBoundingClientRect());
      const likeH = Math.round(likeEl.getBoundingClientRect().height || 0);
      const bottomPx = Math.max(0, Math.round(overlayRect.bottom - targetRect.top - likeH));
      likeEl.style.bottom = bottomPx + 'px';
    }
    
    function reserveTextSpace(commentEl, likeEl){
      const textContainer = commentEl.querySelector('.text-content') || commentEl;
      const likeRect = likeEl.getBoundingClientRect();
      const reserve = Math.max(28, Math.round(likeRect.width) + 8);
      textContainer.style.paddingRight = reserve + 'px';
    }
  </script>
</body>
</html>