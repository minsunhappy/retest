<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>REMBLE - "TED TALK" (OFFICIAL MUSIC VIDEO)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    :root {
      --bg: #ffffff;
      --video-bg: #000;
      --accent: #ff0000;
      --text: #fff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: #fff; /* í°ìƒ‰ ë°°ê²½ */
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .video-title {
      width: 800px;
      margin-top: 40px;
      margin-bottom: 5px;
      text-align: left;
      font-size: 20px;
      font-weight: 600;
      color: #000;
      padding: 0;
      line-height: 1.4;
    }

    .video-container {
      width: 800px;
      margin-top: 20px;
      position: relative;
      background-color: #000;
      overflow: hidden;
      border-radius: 20px; /* ìœ íŠœë¸Œ ëŠë‚Œì˜ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      transition: all 0.3s ease;
    }

    video {
      width: 100%;
      display: block;
      object-fit: cover;
      border-radius: 12px; /* ë¹„ë””ì˜¤ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
    }

    /* ê¸°ë³¸ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ ì™„ì „íˆ ìˆ¨ê¸°ê¸° */
    video::-webkit-media-controls-panel { display: none !important; }
    video::-webkit-media-controls-play-button { display: none !important; }
    video::-webkit-media-controls-start-playback-button { display: none !important; }
    video::-moz-media-controls { display: none !important; }
    video::--ms-media-controls { display: none !important; }

    /* ì»¤ìŠ¤í…€ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.8);
      padding: 4px 15px 4px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 4;
      border-radius: 0 0 12px 12px;
    }

    .video-container:hover .custom-controls { opacity: 1; }

    .progress-container {
      width: 100%;
      height: 3px;
      background: rgba(255,255,255,0.3);
      border-radius: 3px;
      margin-bottom: 6px;
      position: relative;
      cursor: pointer;
    }

    .progress-bar {
      height: 100%;
      background: #ff0000;
      border-radius: 3px;
      width: 0%;
      position: relative;
      transition: width 0.1s ease;
    }

    .progress-handle {
      position: absolute;
      right: -8px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      background: #ff0000;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .progress-container:hover .progress-handle { opacity: 1; }

    .controls-bottom {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .control-button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 8px;
      border-radius: 3px;
      transition: background-color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-button:hover {
      background-color: rgba(255,255,255,0.2);
    }

    .control-button svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    .time-display {
      color: white;
      font-size: 13px;
      font-weight: 500;
    }

    /* ë‹¨ë¬´ì¿  ëŒ“ê¸€ */
    .danmaku-comment {
      position: absolute;
      color: white;
      font-size: 18px;
      font-weight: normal;
      white-space: nowrap;
      z-index: 10;
      pointer-events: none;
      text-shadow:
        -1px -1px 0 #000,
         1px -1px 0 #000,
        -1px  1px 0 #000,
         1px  1px 0 #000;
    }

    .comment-text {
      font-size: 18px;
      color: white;
      font-weight: normal;
    }


  </style>
</head>
  <body>
    <!-- ì œëª©ì„ ì˜ìƒ ìœ„ì— ë°°ì¹˜ -->
    <div class="video-container" id="video-container">
    <video id="video-player" preload="metadata">
      <!-- í…œí”Œë¦¿ ì—”ì§„ì´ ì£¼ì…í•˜ê±°ë‚˜ ì•„ë˜ srcë¡œ ëŒ€ì²´í•˜ì„¸ìš” -->
      <source src="../video/biG3iUCrHaQ.mp4" type="video/mp4" />
      ë¸Œë¼ìš°ì €ê°€ video íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </video>

    <!-- ì»¤ìŠ¤í…€ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ -->
    <div class="custom-controls">
      <div class="progress-container" id="progress-container" aria-label="progress">
        <div class="progress-bar" id="progress-bar">
          <div class="progress-handle"></div>
        </div>
      </div>
      <div class="controls-bottom">
        <button class="control-button" id="play-pause-btn" aria-label="play/pause">
          <svg id="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg id="pause-icon" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <div class="time-display" id="time-display">0:00 / 0:00</div>
      </div>
    </div>
  </div>

  <script>
    // ===== ìœ í‹¸ =====
    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }
    function formatTime(sec){ const m = Math.floor(sec/60); const s = Math.floor(sec%60).toString().padStart(2,'0'); return m + ':' + s; }
    
    // ë¬¸ìì—´ì„ í•´ì‹œê°’ìœ¼ë¡œ ë³€í™˜ (ì¼ê´€ëœ ëœë¤ ìœ„ì¹˜ ìƒì„±ìš©)
    function hashString(str) {
      let hash = 0;
      if (str.length === 0) return hash;
      for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // 32bit ì •ìˆ˜ë¡œ ë³€í™˜
      }
      return Math.abs(hash);
    }

    // ì„œë²„ì—ì„œ ì£¼ì…ë˜ëŠ” ë‹¨ë¬´ì¿  ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ ì˜ˆ: [{ start: 1.2, text: "í•˜ì´" }, ...]
    // í…œí”Œë¦¿ì´ ì—†ë‹¤ë©´ ì•„ë˜ fallback ì‚¬ìš©
    var danmakuComments = (typeof [{"start": 0, "text": "Talk", "correlation": 0.6202421736707809}, {"start": 2, "text": "A TED TALK WITH A MURDEROUS RHYME SCHEME! ğŸš€", "correlation": 0.9837519523389912}, {"start": 5, "text": "WEEZY OUTTA HERE", "correlation": 0.4931588902451753}, {"start": 7, "text": "he way ahead of his time", "correlation": 0.33844707492401926}, {"start": 10, "text": "Donâ€™t Cry No More Momma", "correlation": 0.8586869223544686}, {"start": 11, "text": "Here look itâ€™s a 10 piece", "correlation": 0.4681618089940549}, {"start": 12, "text": "\"I just want flawless diamonds caucasian like white people\" DAWG THIS NIGGA IS FLOWING", "correlation": 0.6568414715504918}, {"start": 13, "text": "I just want flawless diamonds, Caucasian, like white people!", "correlation": 0.810484241137244}, {"start": 15, "text": "Send him 223s and watch him go fight demons ğŸ˜ˆğŸ¤·ğŸ¾â€â™‚ï¸", "correlation": 0.5468472315623635}, {"start": 20, "text": "2021 is the year i see a million", "correlation": 0.964786518474673}, {"start": 21, "text": "It's 2025", "correlation": 0.5687289754674373}, {"start": 23, "text": "I might just have some kids to play with my brothers children", "correlation": 0.9483059627629801}, {"start": 24, "text": "I might just have some babies to play with my brothers children lol sick asf", "correlation": 0.7250677997622755}, {"start": 26, "text": "I know its just a bar. But please dont sign major. They will shelf your ass! You are Godâ€™s soldier. No demon.", "correlation": 0.4015927336099134}, {"start": 27, "text": "I was with you until you Said what's independent????...nigga everything....", "correlation": 0.7281230290115972}, {"start": 28, "text": "Cuzzo the co defendant part hit frfrğŸ¤¦ğŸ¾â€â™‚ï¸", "correlation": 0.386878338355561}, {"start": 29, "text": "Remember when I wasnâ€™t anything but a Co defendant ğŸ˜", "correlation": 0.8949881789150815}, {"start": 30, "text": "â€œRemember when I wasnâ€™t anything but a co defendantâ€ felt that ğŸ˜”", "correlation": 0.7874209243624369}, {"start": 31, "text": "They're so specific", "correlation": 0.3830373384754882}, {"start": 34, "text": "Ever since that draco   Cosigned-it flows with rivers", "correlation": 0.7748553950771218}, {"start": 36, "text": "Michael Phelps in unison with controlled swimmers", "correlation": 1.0}, {"start": 42, "text": "I seen people at parties Rob the coldest Strippers ğŸ”¥ğŸ”¥", "correlation": 0.7002698035235754}, {"start": 43, "text": "Hold up wait a minute Yâ€™all thought I was finished!?? ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ‘¿", "correlation": 0.7442041192297135}, {"start": 44, "text": "This you", "correlation": 0.3263663525437968}, {"start": 45, "text": "\"Killen any opp and anyone hes with\"", "correlation": 0.5697730809756973}, {"start": 47, "text": "\"rearrange the fitted\" ğŸ§¢ ğŸ¥¶", "correlation": 0.5970903367516214}, {"start": 48, "text": "A bakery of biscuits, K's and pistols wit extensions, We're not exchanging mittensğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥", "correlation": 0.7253097321954359}, {"start": 50, "text": "bars", "correlation": 0.32579743694631286}, {"start": 51, "text": "We are not exchanging mittens", "correlation": 0.43009463469480397}, {"start": 52, "text": "\"You're about to experience floyd Mayweather with good penmanship\" on foe he goin", "correlation": 0.6581283186004342}, {"start": 53, "text": "Lmao nobody gonna notice the surfer boys hitting that fighting dance", "correlation": 0.5050520637380521}, {"start": 54, "text": "@WestbladerÂ  Floyd Mayweather is illiterate lmao", "correlation": 0.41094579935977554}, {"start": 55, "text": "Double entandras mixed with glocks its ridiculous ğŸ˜­ğŸ˜­ğŸ˜­", "correlation": 0.3585129019305948}, {"start": 56, "text": "Fades at the beach ğŸ˜‚", "correlation": 0.38605879339346777}, {"start": 57, "text": "on't cry no more momma, here look, it's a ten piece I just want flawless diamonds, Caucasion like white people Send him .223's and watch him go fight demons Always keep an extra gleek, for the times that you might need it Two thousand twenty one is the year that I see a million I might just have some kids to play with my brother's children I might just sign a deal with the major, what's independent? Remember when I wasn't anything but a co-defendant Folks yelling out, \"it's Remble, \" their so specific Ever since that Drakeo cosign he flows with rivers Michael Phelps in unison with controlled swimmers I seen people robbed at parties, the coldest strippers But hold on wait a minute, y'all thought I was finished? Killin' any opp and plus the ones that's hangin' with em' Rearrange a fitted, a bakery of biscuits K's and pistols with extensions, we are not exchanging mittens You're about to witness Floyd Mayweather with good penmanship Double entendres mixed with Glocks, it's ridiculous If I get a Grammy, I'm Kanye West, I'll take a piss on it I had a problem, then bought a chop, and put a stick on it He had a problem, I put my Glock away and spit on him Killing is common, it's just so sad his kids depend on him We seen his chain and it was just swinging like a pendulum I'm snatching his chain, and I'm scaring people out their Timberlands Stipped him for everything, then we men in black, just memories The way we just did him, his friends will wonder what he did to me We really have everything, from the cash to the artilleries My opps turn to fans, it's like they don't even plan on killing me It's Remble, thanks for having me People may attack you, criticize you, or ignore you They can crumple you up with their words Spit you out, or even walk all over you But remember, whatever they do or say You will always keep your value", "correlation": 0.4540493644210055}, {"start": 58, "text": "â€œIf I get Grammy Iâ€™m Kanye west Iâ€™ll take a piss on itâ€â€¦..", "correlation": 0.9029720239482992}, {"start": 60, "text": "I had a problem got a chop and put a stick on it", "correlation": 0.9033257915336992}, {"start": 63, "text": "What he say... He had a problem... I put my Glock away an SPIT ON HIM..", "correlation": 0.6527804026721317}, {"start": 65, "text": "Killing is common it's just so sad his kids depend on him.", "correlation": 0.9774145075312077}, {"start": 66, "text": "The surfurs that are dancing with them ğŸ¤£ğŸ¤£ğŸ¤£", "correlation": 0.5056342989784183}, {"start": 67, "text": "no one talking about random surfers at 1:07", "correlation": 0.3805882560508136}, {"start": 68, "text": "Iâ€™m just trying to figure out what the beat did to him", "correlation": 0.4113539639072656}, {"start": 71, "text": "my nigga snappin on the beach", "correlation": 0.4866338671673008}, {"start": 73, "text": "We men in black we memories fuckkkkkkkking guyyyyy", "correlation": 0.5066705854716465}, {"start": 74, "text": "Stripped him for everything then we men in blacked his memories ğŸ˜³", "correlation": 0.861809963821752}, {"start": 76, "text": "The way we just did him his friends wondering what he did to me ğŸ¤£ğŸ¤£", "correlation": 0.755797758327091}, {"start": 77, "text": "1:17 you all are African Americans andâ€¦ mark but we rockin with mark cause marks rockin with us ğŸ˜‚ğŸ˜‚ğŸ˜‚", "correlation": 0.3087489031635652}, {"start": 78, "text": "â€œWe really have everything from the cash to the artilleryâ€ğŸ”¥ğŸ”¥ğŸ”¥", "correlation": 0.6057331549884071}, {"start": 81, "text": "My opps turns to fans it's like they don't even plan on killing me", "correlation": 0.6070267925893801}, {"start": 83, "text": "â€œMy ops turned a fan like they donâ€™t even plan on killing meâ€ over your head boy sheeeeeesh", "correlation": 0.48078501728388545}, {"start": 84, "text": "Rumble in my top 5ğŸ”¥", "correlation": 0.5151161360657693}, {"start": 90, "text": "He doesn't diss opps, he articulately in a soft spoken manner and verbally annihilate his adversaries", "correlation": 0.3843583097340893}, {"start": 100, "text": "ALWAYS KNOW YOUR WORTH ğŸ¥‡", "correlation": 0.549222800423142}, {"start": 109, "text": "Salute", "correlation": 0.3474752330127806}, {"start": 110, "text": "Thank you", "correlation": 0.6449950336137891}, {"start": 111, "text": "Who are the white boys that join in the video that's shit had me dead like where did they come fromğŸ˜‚?", "correlation": 0.3593716018150069}, {"start": 120, "text": "Damn thought this was another gta music video", "correlation": 0.31890000146230646}] !== 'undefined' ? [{"start": 0, "text": "Talk", "correlation": 0.6202421736707809}, {"start": 2, "text": "A TED TALK WITH A MURDEROUS RHYME SCHEME! ğŸš€", "correlation": 0.9837519523389912}, {"start": 5, "text": "WEEZY OUTTA HERE", "correlation": 0.4931588902451753}, {"start": 7, "text": "he way ahead of his time", "correlation": 0.33844707492401926}, {"start": 10, "text": "Donâ€™t Cry No More Momma", "correlation": 0.8586869223544686}, {"start": 11, "text": "Here look itâ€™s a 10 piece", "correlation": 0.4681618089940549}, {"start": 12, "text": "\"I just want flawless diamonds caucasian like white people\" DAWG THIS NIGGA IS FLOWING", "correlation": 0.6568414715504918}, {"start": 13, "text": "I just want flawless diamonds, Caucasian, like white people!", "correlation": 0.810484241137244}, {"start": 15, "text": "Send him 223s and watch him go fight demons ğŸ˜ˆğŸ¤·ğŸ¾â€â™‚ï¸", "correlation": 0.5468472315623635}, {"start": 20, "text": "2021 is the year i see a million", "correlation": 0.964786518474673}, {"start": 21, "text": "It's 2025", "correlation": 0.5687289754674373}, {"start": 23, "text": "I might just have some kids to play with my brothers children", "correlation": 0.9483059627629801}, {"start": 24, "text": "I might just have some babies to play with my brothers children lol sick asf", "correlation": 0.7250677997622755}, {"start": 26, "text": "I know its just a bar. But please dont sign major. They will shelf your ass! You are Godâ€™s soldier. No demon.", "correlation": 0.4015927336099134}, {"start": 27, "text": "I was with you until you Said what's independent????...nigga everything....", "correlation": 0.7281230290115972}, {"start": 28, "text": "Cuzzo the co defendant part hit frfrğŸ¤¦ğŸ¾â€â™‚ï¸", "correlation": 0.386878338355561}, {"start": 29, "text": "Remember when I wasnâ€™t anything but a Co defendant ğŸ˜", "correlation": 0.8949881789150815}, {"start": 30, "text": "â€œRemember when I wasnâ€™t anything but a co defendantâ€ felt that ğŸ˜”", "correlation": 0.7874209243624369}, {"start": 31, "text": "They're so specific", "correlation": 0.3830373384754882}, {"start": 34, "text": "Ever since that draco   Cosigned-it flows with rivers", "correlation": 0.7748553950771218}, {"start": 36, "text": "Michael Phelps in unison with controlled swimmers", "correlation": 1.0}, {"start": 42, "text": "I seen people at parties Rob the coldest Strippers ğŸ”¥ğŸ”¥", "correlation": 0.7002698035235754}, {"start": 43, "text": "Hold up wait a minute Yâ€™all thought I was finished!?? ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ‘¿", "correlation": 0.7442041192297135}, {"start": 44, "text": "This you", "correlation": 0.3263663525437968}, {"start": 45, "text": "\"Killen any opp and anyone hes with\"", "correlation": 0.5697730809756973}, {"start": 47, "text": "\"rearrange the fitted\" ğŸ§¢ ğŸ¥¶", "correlation": 0.5970903367516214}, {"start": 48, "text": "A bakery of biscuits, K's and pistols wit extensions, We're not exchanging mittensğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥", "correlation": 0.7253097321954359}, {"start": 50, "text": "bars", "correlation": 0.32579743694631286}, {"start": 51, "text": "We are not exchanging mittens", "correlation": 0.43009463469480397}, {"start": 52, "text": "\"You're about to experience floyd Mayweather with good penmanship\" on foe he goin", "correlation": 0.6581283186004342}, {"start": 53, "text": "Lmao nobody gonna notice the surfer boys hitting that fighting dance", "correlation": 0.5050520637380521}, {"start": 54, "text": "@WestbladerÂ  Floyd Mayweather is illiterate lmao", "correlation": 0.41094579935977554}, {"start": 55, "text": "Double entandras mixed with glocks its ridiculous ğŸ˜­ğŸ˜­ğŸ˜­", "correlation": 0.3585129019305948}, {"start": 56, "text": "Fades at the beach ğŸ˜‚", "correlation": 0.38605879339346777}, {"start": 57, "text": "on't cry no more momma, here look, it's a ten piece I just want flawless diamonds, Caucasion like white people Send him .223's and watch him go fight demons Always keep an extra gleek, for the times that you might need it Two thousand twenty one is the year that I see a million I might just have some kids to play with my brother's children I might just sign a deal with the major, what's independent? Remember when I wasn't anything but a co-defendant Folks yelling out, \"it's Remble, \" their so specific Ever since that Drakeo cosign he flows with rivers Michael Phelps in unison with controlled swimmers I seen people robbed at parties, the coldest strippers But hold on wait a minute, y'all thought I was finished? Killin' any opp and plus the ones that's hangin' with em' Rearrange a fitted, a bakery of biscuits K's and pistols with extensions, we are not exchanging mittens You're about to witness Floyd Mayweather with good penmanship Double entendres mixed with Glocks, it's ridiculous If I get a Grammy, I'm Kanye West, I'll take a piss on it I had a problem, then bought a chop, and put a stick on it He had a problem, I put my Glock away and spit on him Killing is common, it's just so sad his kids depend on him We seen his chain and it was just swinging like a pendulum I'm snatching his chain, and I'm scaring people out their Timberlands Stipped him for everything, then we men in black, just memories The way we just did him, his friends will wonder what he did to me We really have everything, from the cash to the artilleries My opps turn to fans, it's like they don't even plan on killing me It's Remble, thanks for having me People may attack you, criticize you, or ignore you They can crumple you up with their words Spit you out, or even walk all over you But remember, whatever they do or say You will always keep your value", "correlation": 0.4540493644210055}, {"start": 58, "text": "â€œIf I get Grammy Iâ€™m Kanye west Iâ€™ll take a piss on itâ€â€¦..", "correlation": 0.9029720239482992}, {"start": 60, "text": "I had a problem got a chop and put a stick on it", "correlation": 0.9033257915336992}, {"start": 63, "text": "What he say... He had a problem... I put my Glock away an SPIT ON HIM..", "correlation": 0.6527804026721317}, {"start": 65, "text": "Killing is common it's just so sad his kids depend on him.", "correlation": 0.9774145075312077}, {"start": 66, "text": "The surfurs that are dancing with them ğŸ¤£ğŸ¤£ğŸ¤£", "correlation": 0.5056342989784183}, {"start": 67, "text": "no one talking about random surfers at 1:07", "correlation": 0.3805882560508136}, {"start": 68, "text": "Iâ€™m just trying to figure out what the beat did to him", "correlation": 0.4113539639072656}, {"start": 71, "text": "my nigga snappin on the beach", "correlation": 0.4866338671673008}, {"start": 73, "text": "We men in black we memories fuckkkkkkkking guyyyyy", "correlation": 0.5066705854716465}, {"start": 74, "text": "Stripped him for everything then we men in blacked his memories ğŸ˜³", "correlation": 0.861809963821752}, {"start": 76, "text": "The way we just did him his friends wondering what he did to me ğŸ¤£ğŸ¤£", "correlation": 0.755797758327091}, {"start": 77, "text": "1:17 you all are African Americans andâ€¦ mark but we rockin with mark cause marks rockin with us ğŸ˜‚ğŸ˜‚ğŸ˜‚", "correlation": 0.3087489031635652}, {"start": 78, "text": "â€œWe really have everything from the cash to the artilleryâ€ğŸ”¥ğŸ”¥ğŸ”¥", "correlation": 0.6057331549884071}, {"start": 81, "text": "My opps turns to fans it's like they don't even plan on killing me", "correlation": 0.6070267925893801}, {"start": 83, "text": "â€œMy ops turned a fan like they donâ€™t even plan on killing meâ€ over your head boy sheeeeeesh", "correlation": 0.48078501728388545}, {"start": 84, "text": "Rumble in my top 5ğŸ”¥", "correlation": 0.5151161360657693}, {"start": 90, "text": "He doesn't diss opps, he articulately in a soft spoken manner and verbally annihilate his adversaries", "correlation": 0.3843583097340893}, {"start": 100, "text": "ALWAYS KNOW YOUR WORTH ğŸ¥‡", "correlation": 0.549222800423142}, {"start": 109, "text": "Salute", "correlation": 0.3474752330127806}, {"start": 110, "text": "Thank you", "correlation": 0.6449950336137891}, {"start": 111, "text": "Who are the white boys that join in the video that's shit had me dead like where did they come fromğŸ˜‚?", "correlation": 0.3593716018150069}, {"start": 120, "text": "Damn thought this was another gta music video", "correlation": 0.31890000146230646}] : null);
    if(!Array.isArray(danmakuComments)){
      danmakuComments = [
        { start: 0.5, text: "ì²« ëŒ“ê¸€!" },
        { start: 1.5, text: "ì˜¤ë¥¸ìª½ì—ì„œ ë“±ì¥í•©ë‹ˆë‹¤" },
        { start: 3.0, text: "ì™¼ìª½ìœ¼ë¡œ ì‚¬ë¼ì ¸ìš”" },
        { start: 5.0, text: "ì‹œí‚¹í•´ë„ ì˜ ë™ì‘" },
      ];
    }

    // ===== ìš”ì†Œ ì°¸ì¡° / ì „ì—­ ìƒíƒœ =====
    var video = null;
    var videoContainer = null;
    var playPauseBtn = null, playIcon = null, pauseIcon = null;
    var progressContainer = null, progressBar = null;
    var timeDisplay = null;

    var isDragging = false;          // ì§„í–‰ë°” ë“œë˜ê·¸
    var activeDanmaku = new Map();   // idx -> { element, currentX, width, y, speed }
    var animationId = null;
    var isPaused = false;            // ë¹„ë””ì˜¤ ì •ì§€ ë™ê¸°í™”
    var lastRafTime = 0;             // requestAnimationFrame ì‹œê°„
    var lastVideoTime = 0;           // ì§ì „ timeupdateì˜ ë¹„ë””ì˜¤ ì‹œê°„ (ì‹œí‚¹ ëŒ€ë¹„)
    
    // danmaku one ì „ìš©: ë‹¤ìŒì— í‘œì‹œí•  ëŒ“ê¸€ ì¸ë±ìŠ¤
    var nextCommentIndex = 0;
    var displayedComments = new Set();  // ì´ë¯¸ í‘œì‹œëœ ëŒ“ê¸€ ì¸ë±ìŠ¤ ì¶”ì 
    
    // ëŒ“ê¸€ë³„ ê³ ìœ  ì†ë„ ê³„ì‚° í•¨ìˆ˜ (í”½ì…€ ë‹¨ìœ„ë¡œ ë„¤ ê°œ ì¤‘ í•˜ë‚˜)
    function getDanmakuSpeed(commentText) {
      const textHash = hashString(commentText || '');
      const speedOptions = [-140, -180, -220, -260]; // px/s (ìŒìˆ˜=ì™¼ìª½)
      return speedOptions[textHash % speedOptions.length];
    }

    document.addEventListener('DOMContentLoaded', function(){
      video = document.getElementById('video-player');
      videoContainer = document.getElementById('video-container');
      playPauseBtn = document.getElementById('play-pause-btn');
      playIcon = document.getElementById('play-icon');
      pauseIcon = document.getElementById('pause-icon');
      progressContainer = document.getElementById('progress-container');
      progressBar = document.getElementById('progress-bar');
      timeDisplay = document.getElementById('time-display');

      // start ê¸°ì¤€ ì •ë ¬
      danmakuComments.sort((a,b) => a.start - b.start);

      // ì´ë²¤íŠ¸ ë°”ì¸ë”©
      video.addEventListener('timeupdate', onTimeUpdate);
      video.addEventListener('loadedmetadata', updateTimeDisplay);
      video.addEventListener('play', () => { updatePlayPauseButton(); lastVideoTime = video.currentTime || 0; resumeAllDanmaku(); });
      video.addEventListener('pause', () => { updatePlayPauseButton(); pauseAllDanmaku(); });
      video.addEventListener('seeking', resetDanmakuForSeek);

      playPauseBtn.addEventListener('click', togglePlayPause);
      progressContainer.addEventListener('mousedown', startDrag);
      document.addEventListener('mousemove', doDrag);
      document.addEventListener('mouseup', endDrag);
      progressContainer.addEventListener('click', (e)=>{ if(!isDragging) seekVideo(e); });

      // ë¦¬ì‚¬ì´ì¦ˆ ì‹œ í˜„ì¬ ë– ìˆëŠ” ë‹¨ë¬´ì¿  ìœ„ì¹˜/í‡´ì¥ íŒì • ë³´ì •
      window.addEventListener('resize', () => {
        // í° ë ˆì´ì•„ì›ƒ ë³€í™”ì—ì„œëŠ” ê°„ë‹¨íˆ ë¦¬ì…‹
        resetDanmakuForSeek();
      });

      // ì´ˆê¸° ìƒíƒœ
      updatePlayPauseButton();
    });

    function togglePlayPause(){ if(video.paused) video.play(); else video.pause(); }

    function updatePlayPauseButton(){
      if(!video) return;
      if(video.paused){
        playIcon.style.display='block';
        pauseIcon.style.display='none';
      } else {
        playIcon.style.display='none';
        pauseIcon.style.display='block';
      }
    }

    function updateTimeDisplay(){
      if(!video || !video.duration) return;
      const cur = formatTime(video.currentTime || 0);
      const tot = formatTime(video.duration);
      timeDisplay.textContent = cur + ' / ' + tot;
    }

    function onTimeUpdate(){
      if(!video) return;
      const t = video.currentTime || 0;

      // ì§„í–‰ë°”
      if(video.duration){
        progressBar.style.width = ((t / video.duration) * 100) + '%';
      }
      updateTimeDisplay();

      // danmaku one: ì²« ë²ˆì§¸ ëŒ“ê¸€ë§Œ onTimeUpdateì—ì„œ í‘œì‹œ (í™œì„± ëŒ“ê¸€ì´ ì—†ê³  ì²« ë²ˆì§¸ ëŒ“ê¸€ì¼ ë•Œë§Œ)
      // ì´í›„ ëŒ“ê¸€ë“¤ì€ updateDanmakuPositionsì—ì„œ ì´ì „ ëŒ“ê¸€ì´ ì™„ì „íˆ ì‚¬ë¼ì§„ í›„ì—ë§Œ í‘œì‹œë¨
      if(activeDanmaku.size === 0 && nextCommentIndex === 0 && !displayedComments.has(0) && nextCommentIndex < danmakuComments.length){
        const firstComment = danmakuComments[0];
        if(firstComment && t >= firstComment.start){
          addDanmakuComment(firstComment, 0);
          displayedComments.add(0);
          nextCommentIndex = 1;
          if (!animationId) startAnimationLoop();
        }
      }

      lastVideoTime = t;
    }

    // ===== ì§„í–‰ë°” ì œì–´ =====
    function startDrag(e){ isDragging = true; e.preventDefault(); updateVideoTime(e); }
    function doDrag(e){ if(!isDragging) return; e.preventDefault(); updateVideoTime(e); }
    function endDrag(){ if(!isDragging) return; isDragging = false; }
    function seekVideo(e){ updateVideoTime(e); }

    function updateVideoTime(e){
      const rect = progressContainer.getBoundingClientRect();
      const pos = clamp((e.clientX - rect.left)/rect.width, 0, 1);
      if (video.duration) {
        video.currentTime = pos * video.duration;
        // ì‹œí‚¹ ì²˜ë¦¬: ë– ìˆëŠ” ë‹¨ë¬´ì¿  ì´ˆê¸°í™” & íƒ€ì„ ë§ˆì»¤ ê°±ì‹ 
        resetDanmakuForSeek();
      }
    }

    // ===== ë‹¨ë¬´ì¿  ìƒì„± / ì• ë‹ˆë©”ì´ì…˜ =====
    function addDanmakuComment(cmt, idx){
      const div = document.createElement('div');
      div.className = 'danmaku-comment';
      div.id = 'danmaku-' + idx;

      const txt = (cmt.text ?? '') + '';
      div.innerHTML = '<div class="comment-text"></div>';
      div.querySelector('.comment-text').textContent = txt; // XSS ì•ˆì „

      // ì„¸ë¡œ ìœ„ì¹˜: ëŒ“ê¸€ í…ìŠ¤íŠ¸ ê¸°ë°˜ ê²°ì •ì  ìœ„ì¹˜ (í•˜ë‹¨ ì—¬ë°± 10px)
      const containerRect = videoContainer.getBoundingClientRect();
      // ëŒ“ê¸€ í…ìŠ¤íŠ¸ë¥¼ í•´ì‹œê°’ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì¼ê´€ëœ ìœ„ì¹˜ ìƒì„±
      const textHash = hashString(cmt.text || '');
      const maxHeight = containerRect.height - 20; // í•˜ë‹¨ 10px ì—¬ë°±
      const randomY = textHash % maxHeight; // ìƒë‹¨ë¶€í„° ì‹œì‘

      // ë¨¼ì € ë¶™ì—¬ì„œ ì‹¤ì œ ë„ˆë¹„ë¥¼ ì°ë‹¤
      div.style.top = randomY + 'px';
      div.style.left = '0px';
      div.style.transform = 'translateX(0px)';
      div.style.transition = 'none';
      videoContainer.appendChild(div);

      const elWidth = div.getBoundingClientRect().width;

      // ì‹œì‘ X: ì»¨í…Œì´ë„ˆ ì˜¤ë¥¸ìª½ ë°”ê¹¥
      const startX = containerRect.width; // +10 ë²„í¼
      div.style.transform = `translateX(${startX}px)`;

      // ëŒ“ê¸€ë³„ ê³ ìœ  ì†ë„ ê³„ì‚°
      const danmakuSpeed = getDanmakuSpeed(cmt.text);

      // ìƒíƒœ ì €ì¥
      activeDanmaku.set(idx, {
        element: div,
        currentX: startX,
        width: elWidth,
        y: randomY,
        speed: danmakuSpeed
      });

      // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„ ê°€ë™
      if (!animationId) startAnimationLoop();
    }

    function startAnimationLoop() {
      function animate(ts) {
        if (!lastRafTime) lastRafTime = ts;
        const deltaTime = (ts - lastRafTime) / 1000; // ì´ˆ
        lastRafTime = ts;

        if (!isPaused) {
          updateDanmakuPositions(deltaTime);
        }

        // ë£¨í”„ ìœ ì§€: í™œì„± ë‹¨ë¬´ì¿ ê°€ ì—†ê³  ë¹„ë””ì˜¤ë„ ì¼ì‹œì •ì§€ë©´ ë©ˆì¶œ ìˆ˜ ìˆìŒ
        if (activeDanmaku.size === 0 && video?.paused) {
          animationId = null;
          lastRafTime = 0;
          return; // ë£¨í”„ ì¢…ë£Œ
        }
        animationId = requestAnimationFrame(animate);
      }
      if (!animationId) animationId = requestAnimationFrame(animate);
    }

    function updateDanmakuPositions(deltaTime) {
      // ê° ëŒ“ê¸€ë³„ ê³ ìœ  ì†ë„ë¡œ ì™¼ìª½ ì´ë™
      var commentJustDisappeared = false;
      
      activeDanmaku.forEach((danmaku, idx) => {
        if (!danmaku || !danmaku.element) return;
        danmaku.currentX += danmaku.speed * deltaTime;

        // ì™„ì „ í‡´ì¥: ìš”ì†Œì˜ ì˜¤ë¥¸ìª½ ëì´ í™”ë©´ ì™¼ìª½ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ì œê±°
        if (danmaku.currentX + danmaku.width < 0) {
          danmaku.element.parentNode?.removeChild(danmaku.element);
          activeDanmaku.delete(idx);
          commentJustDisappeared = true;
        } else {
          danmaku.element.style.transform = `translateX(${danmaku.currentX}px)`;
        }
      });
      
      // danmaku one: ëŒ“ê¸€ì´ ì™„ì „íˆ ì‚¬ë¼ì§„ ì§í›„, ê·¸ ì‹œì  ì´í›„ì˜ ëŒ“ê¸€ ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ ëŒ“ê¸€ í‘œì‹œ
      if (commentJustDisappeared && activeDanmaku.size === 0) {
        const t = video?.currentTime || 0;
        
        // í˜„ì¬ ì‹œê°„ ì´í›„ì˜ ëŒ“ê¸€ ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ ëŒ“ê¸€ ì°¾ê¸° (ì•„ì§ í‘œì‹œë˜ì§€ ì•Šì€ ëŒ“ê¸€ë§Œ)
        var nextComment = null;
        var nextCommentIdx = -1;
        
        for (let i = 0; i < danmakuComments.length; i++) {
          // ì•„ì§ í‘œì‹œë˜ì§€ ì•Šì•˜ê³ , ì‹œì‘ ì‹œê°„ì´ í˜„ì¬ ì‹œê°„ ì´í›„ì¸ ëŒ“ê¸€ ì°¾ê¸°
          if (!displayedComments.has(i) && danmakuComments[i].start >= t) {
            nextComment = danmakuComments[i];
            nextCommentIdx = i;
            break;
          }
        }
        
        // ì°¾ì€ ëŒ“ê¸€ì´ ìˆìœ¼ë©´ í‘œì‹œ
        if (nextComment && nextCommentIdx >= 0) {
          addDanmakuComment(nextComment, nextCommentIdx);
          displayedComments.add(nextCommentIdx);
          nextCommentIndex = nextCommentIdx + 1;
        }
      }
    }

    // ===== ì‹œí‚¹/ì¬ìƒ ë™ê¸°í™” =====
    function pauseAllDanmaku() { isPaused = true; }
    function resumeAllDanmaku() { isPaused = false; if (!animationId) startAnimationLoop(); }

    function resetDanmakuForSeek(){
      // ë– ìˆë˜ ê²ƒë“¤ ì œê±°
      activeDanmaku.forEach((d)=>{ d.element?.parentNode?.removeChild(d.element); });
      activeDanmaku.clear();
      // ë‹¤ìŒ í”„ë ˆì„ ê¸°ì¤€ìœ¼ë¡œ ìƒˆë¡œ íŠ¸ë¦¬ê±°
      lastVideoTime = video?.currentTime || 0;
      // ì• ë‹ˆë©”ì´ì…˜ íƒ€ì„ë¼ì¸ ì´ˆê¸°í™”
      lastRafTime = 0;
      // danmaku one: ë‹¤ìŒ ëŒ“ê¸€ ì¸ë±ìŠ¤ ì¬ê³„ì‚° (í˜„ì¬ ì‹œê°„ ì´í›„ì˜ ì²« ë²ˆì§¸ ëŒ“ê¸€ ì°¾ê¸°)
      displayedComments.clear();  // ì‹œí‚¹ ì‹œ í‘œì‹œëœ ëŒ“ê¸€ ì¶”ì  ì´ˆê¸°í™”
      nextCommentIndex = 0;
      for(let i = 0; i < danmakuComments.length; i++){
        if(danmakuComments[i].start > lastVideoTime){
          nextCommentIndex = i;
          break;
        }
      }
    }
  </script>
</body>
</html>
