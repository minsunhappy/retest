<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>REMBLE - "TED TALK" (OFFICIAL MUSIC VIDEO)</title>
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: #fff; /* í°ìƒ‰ ë°°ê²½ */
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .video-title {
      width: 800px;
      margin-top: 40px;
      margin-bottom: 5px;
      text-align: left;
      font-size: 20px;
      font-weight: 600;
      color: #000;
      padding: 0;
      line-height: 1.4;
    }

    .video-container {
      width: 800px;
      margin-top: 20px;
      position: relative;
      background-color: #000;
      overflow: hidden;
      border-radius: 20px; /* ìœ íŠœë¸Œ ëŠë‚Œì˜ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      transition: all 0.3s ease;
      margin-bottom: 0;
    }

    video {
      width: 100%;
      display: block;
      object-fit: cover;
      border-radius: 12px; /* ë¹„ë””ì˜¤ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
    }

    /* ê¸°ë³¸ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ ì™„ì „íˆ ìˆ¨ê¸°ê¸° */
    video::-webkit-media-controls-panel { display: none !important; }
    video::-webkit-media-controls-play-button { display: none !important; }
    video::-webkit-media-controls-start-playback-button { display: none !important; }
    video::-moz-media-controls { display: none !important; }
    video::--ms-media-controls { display: none !important; }

    /* ì»¤ìŠ¤í…€ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.8);
      padding: 4px 15px 4px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 4;
      border-radius: 0 0 12px 12px;
    }

    .video-container:hover .custom-controls { opacity: 1; }

    /* ì§„í–‰ ë°” ì»¨í…Œì´ë„ˆ */
    .progress-container {
      width: 100%;
      height: 3px;
      background: rgba(255,255,255,0.3);
      border-radius: 3px;
      margin-bottom: 6px;
      position: relative;
      cursor: default;
      pointer-events: none;
    }

    /* ì§„í–‰ ë°” */
    .progress-bar {
      height: 100%;
      background: #ff0000;
      border-radius: 3px;
      width: 0%;
      position: relative;
      transition: width 0.1s ease;
    }

    /* ì§„í–‰ ë°” ë ë™ê·¸ë¼ë¯¸ */
    .progress-handle {
      position: absolute;
      right: -8px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      background: #ff0000;
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .progress-container:hover .progress-handle { opacity: 1; }

    /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ */
    .controls-bottom {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .control-button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 8px;
      border-radius: 3px;
      transition: background-color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-button:hover { background-color: rgba(255,255,255,0.2); }

    .control-button svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    /* ì‹œê°„ í‘œì‹œ */
    .time-display {
      color: white;
      font-size: 13px;
      font-weight: 500;
    }

    /* ===================== ëŒ“ê¸€ ì˜¤ë²„ë ˆì´ (A ìŠ¤íƒ€ì¼) ===================== */
    .comments-overlay {
      --overlay-h: 180;             /* JSì—ì„œ ë™ì  ì¡°ì • */
      --controls-offset: 50px;        /* ì»¨íŠ¸ë¡¤ ë³´ì¼ ë•Œ ìœ„ë¡œ ì˜¬ë¦´ ê±°ë¦¬ */
      position: absolute;
      bottom: 0;
      left: 0; right: 0;
      height: var(--overlay-h);
      pointer-events: none;
      z-index: 2;
      background: linear-gradient(to top, rgba(0,0,0,0.80), rgba(0,0,0,0.5) 40%, rgba(0,0,0,0.2) 80%,  rgba(0,0,0,0));
      overflow: hidden;
      transition: bottom 0.3s ease, height 0.15s ease;
    }

    /* ì»¨íŠ¸ë¡¤ì´ ë³´ì¼ ë•Œ ëŒ“ê¸€ ì˜¤ë²„ë ˆì´ë¥¼ ìœ„ë¡œ ì´ë™ */
    .video-container:hover .comments-overlay { bottom: var(--controls-offset); }

    /* ì‹¤ì œ ëŒ“ê¸€ ì»¨í…Œì´ë„ˆì— mask-image ì ìš© (ê°€ë³€ stop) */
    .comments-container {
      position: relative;
      width: 100%;
      height: 100%;
      --mask-stop: 100%; /* JSì—ì„œ ë™ì  ë³€ê²½ */
      -webkit-mask-image: linear-gradient(to top, black var(--mask-stop), transparent 100%);
      mask-image: linear-gradient(to top, black var(--mask-stop), transparent 100%);
    }

    /* ëŒ“ê¸€ í…ìŠ¤íŠ¸, í”„ë¡œí•„, ì¢‹ì•„ìš”ë¥¼ ë³„ë„ ë ˆì´ì–´ë¡œ ë¶„ë¦¬í•˜ì—¬ ë§ˆìŠ¤í¬ ì˜í–¥ ì œê±° */
    .comments-text-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 3;
    }

    .like-item {
      position: absolute;
      right: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      transition: opacity 0.3s ease;
    }

    /* ê° ëŒ“ê¸€ ìš”ì†Œ */
    .live-comment {
      position: absolute;
      left: 16px;
      right: 16px;
      color: #fff;
      display: flex;
      align-items: center;
      transition: bottom 0.2s ease, opacity 0.3s ease-in-out;
    }

    /* ëŒ“ê¸€ ë‚´ìš© ë ˆì´ì•„ì›ƒ */
    .comment-content { display: flex; align-items: flex-start; width: 100%; }

    .text-content { flex: 1; }

    .user-info { display: flex; align-items: center; gap: 4px; margin-bottom: 2px; }

    .username { font-weight: normal; font-size: 14px; opacity: 1; -webkit-mask-image: none !important; mask-image: none !important; }

    .comment-text {
      font-size: 18px;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: anywhere;
      flex: 1;
      -webkit-mask-image: none !important;
      mask-image: none !important;
    }

    .profile-icon { width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0; opacity: 1; -webkit-mask-image: none !important; mask-image: none !important; }
    .profile-photo { width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0; opacity: 1; -webkit-mask-image: none !important; mask-image: none !important; }

    .likes { display: flex; flex-direction: column; align-items: center; align-self: flex-start; gap: 2px; margin-left: 8px;}

    .heart-icon { 
      width: 20px; 
      height: 20px; 
      fill: #ff0040; 
      opacity: 1;
      -webkit-mask-image: none !important;
      mask-image: none !important;
    }

    .likes-number { 
      color: #ff0040; 
      font-size: 14px; 
      font-weight: 600;
      opacity: 1;
      -webkit-mask-image: none !important;
      mask-image: none !important;
    }
  </style>
</head>
  <body>
    <!-- ì œëª©ì„ ì˜ìƒ ìœ„ì— ë°°ì¹˜ -->
    <div class="video-container">
    <video id="video-player">
      <source src="../../video/biG3iUCrHaQ.mp4" type="video/mp4" />
      ë¸Œë¼ìš°ì €ê°€ video íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </video>

    <!-- ì»¤ìŠ¤í…€ ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ (A ìŠ¤íƒ€ì¼: í”Œë ˆì´/ì¼ì‹œì •ì§€ + ì§„í–‰ë°” + ì‹œê°„ë§Œ) -->
    <div class="custom-controls">
      <div class="progress-container" id="progress-container">
        <div class="progress-bar" id="progress-bar">
          <div class="progress-handle"></div>
        </div>
      </div>
      <div class="controls-bottom">
        <button class="control-button" id="play-pause-btn">
          <svg id="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg id="pause-icon" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <div class="time-display" id="time-display">0:00 / 0:00</div>
      </div>
    </div>

    <!-- ëŒ“ê¸€ ì˜¤ë²„ë ˆì´ (A ìŠ¤íƒ€ì¼: ë†’ì´/ë§ˆìŠ¤í¬ ë™ì ) -->
    <div class="comments-overlay" id="comments-overlay">
      <div class="comments-container" id="comments-container"></div>
      <div class="comments-text-overlay" id="comments-text-overlay"></div>
    </div>
  </div>

  <script id="optimal-comments-data" type="application/json">
    [{"start": 0, "end": 4, "reading time": 4.0, "text": "That's how I talk when I go for a job interview", "reward": 7.006509757878657, "correlation": "0.41708874411219693", "corr_A": "0.4", "corr_V": "0.15", "likes": 60.0, "norm_likes": 0.9174499512452705, "norm_likes_real": 0.9174499512452705, "photo": "https://yt3.ggpht.com/ytc/AIdro_kREbptRpI2iR9p8BdpIOmLmeWUPEJCBGoP7JnuidlM5L78=s88-c-k-c0x00ffffff-no-rj", "author": "@zeekosuave6812", "slot": 0}, {"start": 4, "end": 10, "reading time": 6.0, "text": "\"A Ted talk with a murderous rhyme scheme\" pretty much applies to all his songs so far lol", "reward": 14.47574651844165, "correlation": "0.7063588514492473", "corr_A": "0.7", "corr_V": "0.19", "likes": 4400.0, "norm_likes": 0.9999067168417805, "norm_likes_real": 0.9999067168417805, "photo": "https://yt3.ggpht.com/nnh3sc5SmmHSc1emgB2mV7d03USPLMQPQUvxLmuJlrTb-ywJEy41M0UlGNL7j70nSrMQAWXyWDc=s88-c-k-c0x00ffffff-no-rj", "author": "@101mylo", "slot": 0}, {"start": 10, "end": 14, "reading time": 4.0, "text": "â€œDonâ€™t cry no more momma, here look itâ€™s a ten pieceâ€", "reward": 7.579756897943787, "correlation": "0.454227075849686", "corr_A": "0.46", "corr_V": "0.06", "likes": 727.0, "norm_likes": 0.9864850727865746, "norm_likes_real": 0.9864850727865746, "photo": "https://yt3.ggpht.com/SRRaV4tVRViLT8RP2KzGWKi76eUsjA-88CavA7G-g-InLQfvCq8CpKQaPLpWolkvbKqIYrKXyw=s88-c-k-c0x00ffffff-no-rj", "author": "@Ekdrink88", "slot": 0}, {"start": 14, "end": 19, "reading time": 5.0, "text": "\"I just want flawless diamonds Caucasian like white people\" is a bar", "reward": 11.774782380800184, "correlation": "0.6893367608755733", "corr_A": "0.7", "corr_V": "0.08", "likes": 367.0, "norm_likes": 0.9762829544088903, "norm_likes_real": 0.9762829544088903, "photo": "https://yt3.ggpht.com/ytc/AIdro_n5brY2HPEFMYOCIQs15woQ5r2s8DndTPC07cbcCfO6R4Rg=s88-c-k-c0x00ffffff-no-rj", "author": "@direisdead1750", "slot": 0}, {"start": 19, "end": 20, "reading time": 1.0, "text": "Beach Preachin", "reward": 0.6699025936116868, "correlation": "0.3349512968058434", "corr_A": "0.06", "corr_V": "0.34", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/ytc/AIdro_l3IpSsAN18-sWND7iQz5dy_wf3zWJLjfXDvrW5VkI=s88-c-k-c0x00ffffff-no-rj", "author": "@KevlarWagon", "slot": 0}, {"start": 20, "end": 23, "reading time": 3.0, "text": "2021 is the year i see a million", "reward": 5.788719110848038, "correlation": "0.964786518474673", "corr_A": "0.98", "corr_V": "0.03", "likes": 1.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/ytc/AIdro_mThK6m70mwBzqsVKXtx-bpFchQ7qOV4mo8NoAHC45u1Lg=s88-c-k-c0x00ffffff-no-rj", "author": "@yungsplashhh1941", "slot": 0}, {"start": 23, "end": 29, "reading time": 6.0, "text": "â€œI might just have some kids,to play with my brotherâ€™s childrenâ€ thatâ€™s grown man shit!! ğŸ”¥ğŸ”¥", "reward": 12.37732464012836, "correlation": "0.5505326679224621", "corr_A": "0.55", "corr_V": "0.13", "likes": 191.0, "norm_likes": 0.9618221041764694, "norm_likes_real": 0.9618221041764694, "photo": "https://yt3.ggpht.com/XF8FFtRGStSskRcw7D-cqLV4bO7vJUz4PVwG_sAVvFgo2872HQUpwihLf682pbs5uL0qZuLC520=s88-c-k-c0x00ffffff-no-rj", "author": "@Risky_crew", "slot": 0}, {"start": 29, "end": 34, "reading time": 5.0, "text": "â€œRemember when I wasnâ€™t anything but a co defendantâ€ felt that ğŸ˜”", "reward": 12.825906951637878, "correlation": "0.786721403860458", "corr_A": "0.8", "corr_V": "0.04", "likes": 1200.0, "norm_likes": 0.9917385826066595, "norm_likes_real": 0.9917385826066595, "photo": "https://yt3.ggpht.com/XB_xEDpdJZAV91i8vIk0aDeEnnCXT9RB5BvKStB5gL6_MvEH-dj34CNAWo1R62vXl_PewOdLCQ=s88-c-k-c0x00ffffff-no-rj", "author": "@streetsweeper6600", "slot": 0}, {"start": 34, "end": 38, "reading time": 4.0, "text": "\"ever since that drakeo co-sign he flows with rivers\"", "reward": 9.134828345573167, "correlation": "0.6562233273318065", "corr_A": "0.66", "corr_V": "0.12", "likes": 284.0, "norm_likes": 0.9712604317296788, "norm_likes_real": 0.9712604317296788, "photo": "https://yt3.ggpht.com/u_1NQUJETPGdUMAlx-He5uj-Thutp9dBdwj7mmooh3coBxVRt19ZNx4bz92Ex3fR5N5V_jeDxas=s88-c-k-c0x00ffffff-no-rj", "author": "@8CLN4", "slot": 0}, {"start": 38, "end": 43, "reading time": 5.0, "text": "Nobody:     Remble: Micheal phelps in Unison with controlled swimmers.", "reward": 12.635222136311395, "correlation": "0.8215924897145823", "corr_A": "0.82", "corr_V": "0.18", "likes": 35.0, "norm_likes": 0.8838594478331142, "norm_likes_real": 0.8838594478331142, "photo": "https://yt3.ggpht.com/f-wXErlQyLpPVVPMAM2tDo1vYbC407BRYzBxDu0VD4vOvVTJl20JLhUTtelswSf4NvSDwBIG=s88-c-k-c0x00ffffff-no-rj", "author": "@littsociety", "slot": 0}, {"start": 43, "end": 47, "reading time": 4.0, "text": "Hold on wait a minute.. THEY THOUGHT YOU WAS FINISHEDâ‰ï¸", "reward": 7.575507772610408, "correlation": "0.5267076584896322", "corr_A": "0.54", "corr_V": "0.0", "likes": 21.0, "norm_likes": 0.8404616261733375, "norm_likes_real": 0.8404616261733375, "photo": "https://yt3.ggpht.com/ytc/AIdro_nbg1TaisiQnjgKklohgoUT2ufoSrF88r0ySuKRUKc=s88-c-k-c0x00ffffff-no-rj", "author": "@omarromero984", "slot": 0}, {"start": 47, "end": 50, "reading time": 3.0, "text": "ITS REMBLE BUT THATS BESIDES THE POINT", "reward": 5.897366414340199, "correlation": "0.4988001108239952", "corr_A": "0.5", "corr_V": "0.12", "likes": 247.0, "norm_likes": 0.968188583132076, "norm_likes_real": 0.968188583132076, "photo": "https://yt3.ggpht.com/pkZvFAudsrtbkyXolMLWUcsQxj7zc31UA5p2xfYz042LyEJ6s6rkkNvTmTvTLrYOSJ1uO0So=s88-c-k-c0x00ffffff-no-rj", "author": "@ApoIogy", "slot": 0}, {"start": 50, "end": 53, "reading time": 3.0, "text": "A BAKERY OF BISCUITS ğŸ”Š ğŸ”Š love that part lol", "reward": 4.153127280466581, "correlation": "0.6921878800777636", "corr_A": "0.71", "corr_V": "0.03", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/zMx1dhciUcpLYUvYM25nhtFrLPYvYKux2p4ttKdC75ibXua2lKB-HRBC6RhPBflYk-KZ4T7o=s88-c-k-c0x00ffffff-no-rj", "author": "@ababydeity", "slot": 0}, {"start": 53, "end": 58, "reading time": 5.0, "text": "\"your about to witness Floyd Mayweather wit good penmanship\"ğŸ˜‚ğŸ˜‚", "reward": 11.162550015930336, "correlation": "0.6216642190685748", "corr_A": "0.63", "corr_V": "0.1", "likes": 923.0, "norm_likes": 0.9891815650489174, "norm_likes_real": 0.9891815650489174, "photo": "https://yt3.ggpht.com/RHAvXW7q8nfQbiBUnSEST5R4qFe72uYl8xcIkMFGLgn-3oU14PIWyRxA4bHrpdANFgxJm3qLUQ=s88-c-k-c0x00ffffff-no-rj", "author": "@Rackiblez", "slot": 0}, {"start": 58, "end": 62, "reading time": 4.0, "text": "â€œIf I get Grammy Iâ€™m Kanye west Iâ€™ll take a piss on itâ€â€¦..", "reward": 7.223776191586394, "correlation": "0.9029720239482992", "corr_A": "0.91", "corr_V": "0.14", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/ytc/AIdro_ln1AsYKjAB5LzXlmPxnI_H-4gaaY3oURxEGy1FOV8=s88-c-k-c0x00ffffff-no-rj", "author": "@p0ps209", "slot": 0}, {"start": 62, "end": 67, "reading time": 5.0, "text": "â€œI had a problem then bought a chop and put a stick on itâ€ ğŸ”¥ğŸ”¥ğŸ¥‡", "reward": 11.969328362647415, "correlation": "0.7301344306373271", "corr_A": "0.75", "corr_V": "0.01", "likes": 84.0, "norm_likes": 0.9335968112548289, "norm_likes_real": 0.9335968112548289, "photo": "https://yt3.ggpht.com/uFMLQhA5vEHf_yylR0MZYy93ELT1f5I42UFk3Q3bgSHOdzb2Al1y6IMhgcgPU1XmvFsvsEsj=s88-c-k-c0x00ffffff-no-rj", "author": "@SMRaxs", "slot": 0}, {"start": 67, "end": 71, "reading time": 4.0, "text": "Killing is common it's just so sad his kids depend on him.", "reward": 7.81391838194188, "correlation": "0.976739797742735", "corr_A": "1.0", "corr_V": "0.0", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/uYNn1JERAvW2wTAYT3lLxcd5oT3S04np_HMAL14cCAOsvp67rj1tTreMeBNGzD0CFtgrsjwT=s88-c-k-c0x00ffffff-no-rj", "author": "@botdavid323", "slot": 0}, {"start": 71, "end": 73, "reading time": 2.0, "text": "His little dance goes hard ğŸ¤£ğŸ¤£", "reward": 3.4627939958074867, "correlation": "0.4065382959219639", "corr_A": "0.22", "corr_V": "0.35", "likes": 61.0, "norm_likes": 0.9183204060598157, "norm_likes_real": 0.9183204060598157, "photo": "https://yt3.ggpht.com/ytc/AIdro_mrA3p6SVaC7cwQzveqn41HrSMlSaVAD_zQvRBX60w=s88-c-k-c0x00ffffff-no-rj", "author": "@lexielopez3683", "slot": 0}, {"start": 73, "end": 77, "reading time": 4.0, "text": "Striped him for everything, then mib his memories", "reward": 7.035298290907528, "correlation": "0.5977999917078758", "corr_A": "0.61", "corr_V": "0.05", "likes": 4.0, "norm_likes": 0.5632245893111304, "norm_likes_real": 0.5632245893111304, "photo": "https://yt3.ggpht.com/MswBo1LumRWzo4rxR44Rp_AdfTnOmLDJMiNAcaGW1gcPYLPJsllU_2OoaKtvopdhTl8XvLNr=s88-c-k-c0x00ffffff-no-rj", "author": "@Jason-iq2fy", "slot": 0}, {"start": 77, "end": 82, "reading time": 5.0, "text": "The way we just did him his friends wondering what he did to me ğŸ¤£ğŸ¤£", "reward": 12.496745221952061, "correlation": "0.755797758327091", "corr_A": "0.75", "corr_V": "0.19", "likes": 810.0, "norm_likes": 0.9877535277362304, "norm_likes_real": 0.9877535277362304, "photo": "https://yt3.ggpht.com/xkHwoPo3mq9xKAZjY2hzsjOck4j1qrDwuXj0pw7VXacjrxkBon6RQnK4IRHoE2aP61tkyy-h=s88-c-k-c0x00ffffff-no-rj", "author": "@paymogarcia5872", "slot": 0}, {"start": 82, "end": 87, "reading time": 5.0, "text": "\"My opps turned to fans it's like they  don't even plan on killin me\"", "reward": 10.039908326030552, "correlation": "0.5403662332249398", "corr_A": "0.55", "corr_V": "0.08", "likes": 73.0, "norm_likes": 0.9272491987562312, "norm_likes_real": 0.9272491987562312, "photo": "https://yt3.ggpht.com/ytc/AIdro_kVdhQYoB8QUe_Esk7l1cJeXncX95a045Xl1c-VEOgNfFE=s88-c-k-c0x00ffffff-no-rj", "author": "@bradshaw123", "slot": 0}, {"start": 87, "end": 93, "reading time": 6.0, "text": "The cosmic maturity it takes to tell the truth wholeheartedly and between the lines at once is remble superpower", "reward": 7.379829302827337, "correlation": "0.30595584774748186", "corr_A": "0.3", "corr_V": "0.08", "likes": 5.0, "norm_likes": 0.6180598549762593, "norm_likes_real": 0.6180598549762593, "photo": "https://yt3.ggpht.com/ytc/AIdro_mHiSKjlhkBiR8UhJtYjCIzsueNIHN17K3EWIrsEiE=s88-c-k-c0x00ffffff-no-rj", "author": "@jaya2812", "slot": 0}, {"start": 93, "end": 97, "reading time": 4.0, "text": "Shaking their hands as they thank him for the eulogy ğŸ™ğŸ™ğŸ™", "reward": 5.215399858640585, "correlation": "0.30782266307824685", "corr_A": "0.07", "corr_V": "0.31", "likes": 7.0, "norm_likes": 0.6882046385036525, "norm_likes_real": 0.6882046385036525, "photo": "https://yt3.ggpht.com/ytc/AIdro_mtpUToWk_corto4PM7oaNaCyc81XpN3HdmDnesgGQ4Dyg=s88-c-k-c0x00ffffff-no-rj", "author": "@richardpoor", "slot": 0}, {"start": 97, "end": 103, "reading time": 6.0, "text": "The surfer on the right vibing and got the rhythm and the one on the left look so confused like he donâ€™t kno why he thereğŸ˜­ğŸ˜­", "reward": 5.888254766478896, "correlation": "0.32143297376114477", "corr_A": "0.08", "corr_V": "0.32", "likes": 2.0, "norm_likes": 0.33850984689085983, "norm_likes_real": 0.33850984689085983, "photo": "https://yt3.ggpht.com/UVogMZeBwgfNJGYIZ422s4SwQi9qklYhrLy57qWcRNzl57QwCpPhtN_40INgfXxOIPFuz8LxshA=s88-c-k-c0x00ffffff-no-rj", "author": "@smerkishh4", "slot": 0}, {"start": 103, "end": 105, "reading time": 2.0, "text": "ALWAYS KNOW YOUR WORTH ğŸ¥‡", "reward": 2.196891201692568, "correlation": "0.549222800423142", "corr_A": "0.56", "corr_V": "0.05", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/ytc/AIdro_mdnanGedO21vJ0GKH-FtayRdj9TnZfWo0rT995Nsgwbg=s88-c-k-c0x00ffffff-no-rj", "author": "@ttvnelson3102", "slot": 0}, {"start": 105, "end": 107, "reading time": 2.0, "text": "Keep Ur Value My Friends", "reward": 2.037265525618669, "correlation": "0.5093163814046673", "corr_A": "0.52", "corr_V": "0.01", "likes": 1.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/ytc/AIdro_n6lFk9lgS2EiOodqJC3QZ3DaJQekHDG6i-QPx8VmlYPaM=s88-c-k-c0x00ffffff-no-rj", "author": "@TheGman559", "slot": 0}, {"start": 107, "end": 109, "reading time": 2.0, "text": "The 2 random surfer dudes ğŸ’€", "reward": 1.3092223861086074, "correlation": "0.32730559652715185", "corr_A": "0.0", "corr_V": "0.33", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/z9x6O7ejAwI91JvGSVC5N-c2hshoRito7AxqcyV_cc8k90TZjd69uweQHEwXdLqmtDBXAAF6Bw=s88-c-k-c0x00ffffff-no-rj", "author": "@biganimetiddiees9810", "slot": 0}, {"start": 109, "end": 110, "reading time": 1.0, "text": "Thank you", "reward": 1.2731535735799415, "correlation": "0.6365767867899708", "corr_A": "0.65", "corr_V": "0.03", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/ytc/AIdro_nmr7F4VKLzW31ko-3x0ym59GD7Wu3SWBYmTnViT5WlOA=s88-c-k-c0x00ffffff-no-rj", "author": "@mooneysunny4125", "slot": 0}, {"start": 110, "end": 111, "reading time": 1.0, "text": "Wow ğŸ¤£ğŸ¤£ğŸ˜‚â˜ ", "reward": 1.1794681584153164, "correlation": "0.30812178455209305", "corr_A": "0.3", "corr_V": "0.09", "likes": 4.0, "norm_likes": 0.5632245893111304, "norm_likes_real": 0.5632245893111304, "photo": "https://yt3.ggpht.com/ytc/AIdro_l-WDsw4LtzICi-7i6jrIYXRB6KWtLuDU90B1pQX1MqhL4=s88-c-k-c0x00ffffff-no-rj", "author": "@paulcharles2457", "slot": 0}, {"start": 111, "end": 113, "reading time": 2.0, "text": "The dance ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥", "reward": 1.7076294886662986, "correlation": "0.42690737216657465", "corr_A": "0.18", "corr_V": "0.4", "likes": 0.0, "norm_likes": 0.0, "norm_likes_real": 0.0, "photo": "https://yt3.ggpht.com/llPiBZBvDVagDL3HNXvNNx1R_a4beWLCTxq-aYaBZLPwPi75QBytyu7H-yT08d2WCa8tQjE2DQ=s88-c-k-c0x00ffffff-no-rj", "author": "@millesrobloxshorts6972", "slot": 0}, {"start": 113, "end": 119, "reading time": 6.0, "text": "The â€œlistening while scrolling down the commentsâ€ crew.  p.s remble next up!", "reward": 8.993381240132635, "correlation": "0.313391318276769", "corr_A": "0.22", "corr_V": "0.23", "likes": 30.0, "norm_likes": 0.8721142368019011, "norm_likes_real": 0.8721142368019011, "photo": "https://yt3.ggpht.com/ytc/AIdro_lYTVg_mv-pagjy1GNUXC6o57ytRJC0iIFaVQvzEi25xw=s88-c-k-c0x00ffffff-no-rj", "author": "@OhDrewzy", "slot": 0}, {"start": 119, "end": 124, "reading time": 5.0, "text": "Lmao nobody gonna notice the surfer boys hitting that fighting dance", "reward": 5.988944642867546, "correlation": "0.31728216963118944", "corr_A": "0.0", "corr_V": "0.32", "likes": 4.0, "norm_likes": 0.5632245893111304, "norm_likes_real": 0.5632245893111304, "photo": "https://yt3.ggpht.com/ytc/AIdro_lQcLwnaCmaYmTUaKXmnOCd3uvVjgEo9v-N_84rMfg_Y5w=s88-c-k-c0x00ffffff-no-rj", "author": "@YoohPhuck", "slot": 0}]
  </script>
  <script>
    // ìˆ«ì í¬ë§·: 1k ë‹¨ìœ„
    function formatLikes(n){
      if(n < 1000) return n.toString();
      let f = (n/1000).toFixed(1);
      if(f.endsWith('.0')) f = f.slice(0,-2);
      return f + 'K';
    }

    // mm:ss
    function formatTime(sec){
      const m = Math.floor(sec/60);
      const s = Math.floor(sec%60).toString().padStart(2,'0');
      return `${m}:${s}`;
    }

    // ëœë¤ ì‚¬ìš©ìëª…/ìƒ‰ìƒ
    function getRandomName(){
      const names = ["Alice","Bob","Charlie","David","Eva","Frank","Grace","Helen","Ivy","Jack"];
      return names[Math.floor(Math.random()*names.length)];
    }
    function getRandomColor(){
      const letters = '0123456789ABCDEF';
      let color = '#';
      for(let i=0;i<6;i++){ color += letters[Math.floor(Math.random()*16)]; }
      return color;
    }

    // ì„œë²„ì—ì„œ ì£¼ì…ë˜ëŠ” ìµœì  ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸
    var optimalComments = [];
    (function hydrateOptimalComments(){
      var dataNode = document.getElementById('optimal-comments-data');
      if(!dataNode){
        return;
      }
      try{
        var rawText = dataNode.textContent || dataNode.innerText || '[]';
        optimalComments = JSON.parse(rawText);
      }catch(err){
        console.warn('Failed to parse optimal comments JSON', err);
        optimalComments = [];
      }
    })();
    optimalComments = optimalComments || [];
    optimalComments.forEach(function(item){
      if(typeof item.slot !== 'number' || isNaN(item.slot)){
        item.slot = 0;
      }
    });
    var totalSlots = optimalComments.reduce(function(acc, cur){
      var slotIdx = (typeof cur.slot === 'number' && !isNaN(cur.slot)) ? cur.slot : 0;
      return Math.max(acc, slotIdx + 1);
    }, 1);
    const SLOT_BASE_OFFSET = 12;
    const SLOT_GAP = 12;
    const SLOT_MIN_HEIGHT = 48;
    const SLOT_DEFAULT_HEIGHT = 64;
    var slotHeights = new Array(totalSlots).fill(SLOT_DEFAULT_HEIGHT);
    var slotRegistry = {};

    // ìš”ì†Œ ì°¸ì¡°
    var video=null, commentsContainer=null, commentsOverlay=null, commentsTextOverlay=null, videoContainerEl=null;
    var playPauseBtn=null, playIcon=null, pauseIcon=null;
    var progressBar=null;
    var timeDisplay=null;

    document.addEventListener('DOMContentLoaded', function(){
      video = document.getElementById('video-player');
      commentsContainer = document.getElementById('comments-container');
      commentsOverlay = document.getElementById('comments-overlay');
      commentsTextOverlay = document.getElementById('comments-text-overlay');
      playPauseBtn = document.getElementById('play-pause-btn');
      playIcon = document.getElementById('play-icon');
      pauseIcon = document.getElementById('pause-icon');
      progressBar = document.getElementById('progress-bar');
      timeDisplay = document.getElementById('time-display');
      videoContainerEl = document.querySelector('.video-container');

      // start ê¸°ì¤€ ì •ë ¬
      optimalComments.sort((a,b)=>a.start-b.start);

      // ì´ë²¤íŠ¸ ë°”ì¸ë”©
      video.addEventListener('timeupdate', onTimeUpdate);
      video.addEventListener('loadedmetadata', ()=>{ updateTimeDisplay(); recalcOverlayByComments(); });
      video.addEventListener('play', updatePlayPauseButton);
      video.addEventListener('pause', updatePlayPauseButton);
      video.addEventListener('ended', updatePlayPauseButton);

      playPauseBtn.addEventListener('click', togglePlayPause);

      window.addEventListener('resize', recalcOverlayByComments);

      // ì´ˆê¸° ìƒíƒœ
      updatePlayPauseButton();
      updateStackReserve();
    });

    function togglePlayPause(){
      if(video.paused){ 
        video.play(); 
      } else { 
        video.pause(); 
      }
    }
    function updatePlayPauseButton(){
      if(video.paused){ playIcon.style.display='block'; pauseIcon.style.display='none'; }
      else { playIcon.style.display='none'; pauseIcon.style.display='block'; }
    }

    function updateTimeDisplay(){
      if(!video.duration) return;
      const cur = formatTime(video.currentTime);
      const tot = formatTime(video.duration);
      timeDisplay.textContent = `${cur} / ${tot}`;
    }

    function onTimeUpdate(){
      const t = video.currentTime;
      // ì§„í–‰ë°”
      if(video.duration){ progressBar.style.width = ((t/video.duration)*100) + '%'; }
      updateTimeDisplay();

      // ëŒ“ê¸€ í‘œì‹œ/ì œê±°
      optimalComments.forEach(function(cmt, idx){
        var el = document.getElementById('comment-'+idx);
        var textEl = document.getElementById('comment-text-'+idx);
        if(cmt.start <= t && t < cmt.end){
          if(!el) addLiveComment(cmt, idx);
        } else if(el && t >= cmt.end){
          var slotIdx = parseInt(el.dataset.slot || '0', 10);
          // í˜ì´ë“œ ì•„ì›ƒ í›„ ì œê±°, í…ìŠ¤íŠ¸ì™€ likesë„ í•¨ê»˜ ì œê±°
          el.style.opacity = '0';
          if(textEl) textEl.style.opacity = '0';
          var likeEl = document.getElementById('like-'+idx);
          if(likeEl) likeEl.style.opacity = '0';
          setTimeout(()=>{
            if(el && el.parentNode) el.remove();
            if(textEl && textEl.parentNode) textEl.remove();
            if(likeEl && likeEl.parentNode) likeEl.remove();
            releaseSlotElement(slotIdx, idx);
            recalcOverlayByComments();
          }, 300);
        }
      });
      // ìœ„ì¹˜ ë™ê¸°í™”
      syncLikesPositions();
    }

    function addLiveComment(cmt, idx){
      var slotIdx = (typeof cmt.slot === 'number' && !isNaN(cmt.slot)) ? cmt.slot : 0;
      var initialBottom = computeSlotOffset(slotIdx);

      // ë§ˆìŠ¤í¬ê°€ ì ìš©ë˜ëŠ” ê¸°ë³¸ ëŒ“ê¸€ ì»¨í…Œì´ë„ˆ (íˆ¬ëª…í•œ í”Œë ˆì´ìŠ¤í™€ë”)
      var div = document.createElement('div');
      div.className = 'live-comment';
      div.id = 'comment-' + idx;
      div.dataset.slot = slotIdx;
      div.style.bottom = initialBottom + 'px';
      div.style.opacity = '0';
      div.style.height = '60px'; // í…ìŠ¤íŠ¸ ë†’ì´ ì˜ˆìƒê°’
      commentsContainer.appendChild(div);

      // í…ìŠ¤íŠ¸ì™€ í”„ë¡œí•„ì„ ë³„ë„ ë ˆì´ì–´ì— ë Œë”ë§ (ë§ˆìŠ¤í¬ ì˜í–¥ ì—†ìŒ)
      var textDiv = document.createElement('div');
      textDiv.className = 'live-comment';
      textDiv.id = 'comment-text-' + idx;
      textDiv.dataset.slot = slotIdx;

      var user = cmt.author || cmt.user || getRandomName();
      var txt = cmt.text || '';
      var likes = (cmt.likes !== undefined) ? cmt.likes : 0;
      var profileColor = getRandomColor();
      var photo = cmt.photo;

      textDiv.innerHTML = `
        <div class="comment-content">
          <div class="text-content">
            <div class="user-info">
              ${photo ? `<img class="profile-photo" src="${photo}" alt="Profile" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" />` : ''}
              <div class="profile-icon" style="background-color:${profileColor}; display:${photo ? 'none' : 'block'};"></div>
              <span class="username">${user}</span>
            </div>
            <span class="comment-text">${txt}</span>
          </div>
        </div>`;

      textDiv.style.bottom = initialBottom + 'px';
      textDiv.style.opacity = '0';
      commentsTextOverlay.appendChild(textDiv);

      // ì¢‹ì•„ìš”/í•˜íŠ¸ë„ ê°™ì€ ë ˆì´ì–´ì— ë Œë”ë§(ë§ˆìŠ¤í¬ ë¹„ì ìš©)
      var like = document.createElement('div');
      like.className = 'like-item';
      like.id = 'like-' + idx;
      like.dataset.slot = slotIdx;
      like.style.bottom = initialBottom + 'px';
      like.style.opacity = '0';
      like.innerHTML = `
        <svg class="heart-icon" viewBox="0 0 24 24">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        <span class="likes-number">${formatLikes(likes)}</span>`;
      commentsTextOverlay.appendChild(like);

      // ìƒì„± ì§í›„ ìœ„ì¹˜/ì—¬ë°± ê³„ì‚°ì„ ë¨¼ì € ìˆ˜í–‰í•´ ì í”„ ë°©ì§€
      placeLikeForComment(textDiv, like);
      reserveTextSpace(textDiv, like);

      requestAnimationFrame(()=>{
        registerSlotElement(slotIdx, idx, div, textDiv, like);
        div.style.opacity='1';
        textDiv.style.opacity='1';
        like.style.opacity='1';
        recalcOverlayByComments();
      });
    }

    // ===== A ìŠ¤íƒ€ì¼: ëŒ“ê¸€ ê¸¸ì´ì— ë”°ë¼ ì˜¤ë²„ë ˆì´ ë†’ì´ì™€ ë§ˆìŠ¤í¬ ê°€ë³€ =====
    const OVERLAY_PADDING = 15; // í•˜ë‹¨ ì—¬ë°±
    const OVERLAY_MIN = 68;     // ìµœì†Œ ë†’ì´
    const OVERLAY_MAX_RATIO = 1; // ë¹„ë””ì˜¤ ë†’ì´ ëŒ€ë¹„ ìµœëŒ€ ë¹„ìœ¨
    const USERINFO_EXTRA = 16;  // user-info ë¼ì¸ ì—¬ìœ ì¹˜

    function clampOverlayHeight(px){
      const vc = document.querySelector('.video-container');
      const vh = vc?.getBoundingClientRect().height || 0;
      const maxH = vh ? Math.floor(vh * OVERLAY_MAX_RATIO) : 260;
      return Math.max(OVERLAY_MIN, Math.min(px, maxH));
    }

    function recalcOverlayByComments(){
      if(!commentsTextOverlay || !commentsOverlay) return;
      updateSlotPositions();
      const allComments = Array.from(commentsTextOverlay.querySelectorAll('.live-comment'));
      if(allComments.length === 0){
        const h = clampOverlayHeight(OVERLAY_MIN);
        commentsOverlay.style.setProperty('--overlay-h', h + 'px');
        commentsContainer.style.setProperty('--mask-stop', '35%');
        return;
      }

      const overlayRect = commentsOverlay.getBoundingClientRect();
      let maxDistance = 0;
      allComments.forEach(el=>{
        const rect = el.getBoundingClientRect();
        const distance = overlayRect.bottom - rect.top;
        maxDistance = Math.max(maxDistance, Math.ceil(distance));
      });

      const desired = clampOverlayHeight(Math.ceil(maxDistance + OVERLAY_PADDING));
      commentsOverlay.style.setProperty('--overlay-h', desired + 'px');

      let maskStop = 45;
      if(desired > 120) maskStop = 55;
      if(desired > 160) maskStop = 65;
      if(desired > 200) maskStop = 72;
      commentsContainer.style.setProperty('--mask-stop', maskStop + '%');
      // ì¢‹ì•„ìš” ìœ„ì¹˜ ì¬ê³„ì‚°
      syncLikesPositions();
    }
    
    function syncLikesPositions(){
      updateSlotPositions();
      if(!commentsOverlay || !commentsTextOverlay) return;
      const overlayRect = commentsOverlay.getBoundingClientRect();
      const comments = Array.from(commentsTextOverlay.querySelectorAll('.live-comment'));
      comments.forEach(el=>{
        const id = el.id || '';
        const idx = id.split('-')[2]; // 'comment-text-0' -> '0'
        if(idx === undefined) return;
        const likeEl = document.getElementById('like-'+idx);
        if(!likeEl) return;
        placeLikeForComment(el, likeEl, overlayRect);
        likeEl.style.opacity = getComputedStyle(el).opacity;
        reserveTextSpace(el, likeEl);
      });
    }
    
    function placeLikeForComment(commentEl, likeEl, overlayRectOpt){
      if(!commentsOverlay) return;
      const overlayRect = overlayRectOpt || commentsOverlay.getBoundingClientRect();
      const userInfo = commentEl.querySelector('.user-info');
      const targetRect = (userInfo ? userInfo.getBoundingClientRect() : commentEl.getBoundingClientRect());
      const likeH = Math.round(likeEl.getBoundingClientRect().height || 0);
      const bottomPx = Math.max(0, Math.round(overlayRect.bottom - targetRect.top - likeH));
      likeEl.style.bottom = bottomPx + 'px';
    }
    
    function reserveTextSpace(commentEl, likeEl){
      const textContainer = commentEl.querySelector('.text-content') || commentEl;
      const likeRect = likeEl.getBoundingClientRect();
      const reserve = Math.max(28, Math.round(likeRect.width) + 8);
      textContainer.style.paddingRight = reserve + 'px';
    }

    function getSlotHeight(slotIdx){
      if(slotIdx < 0 || slotIdx >= slotHeights.length){
        return SLOT_DEFAULT_HEIGHT;
      }
      return slotHeights[slotIdx] || SLOT_DEFAULT_HEIGHT;
    }

    function computeSlotOffset(slotIdx){
      let offset = SLOT_BASE_OFFSET;
      for(let i=0; i<slotIdx; i++){
        offset += (getSlotHeight(i) + SLOT_GAP);
      }
      return offset;
    }

    function updateSlotPositions(){
      Object.keys(slotRegistry).forEach(function(key){
        const slotIdx = parseInt(key, 10);
        if(Number.isNaN(slotIdx)) return;
        const entry = slotRegistry[slotIdx];
        if(!entry) return;
        const offset = computeSlotOffset(slotIdx);
        const targets = [entry.placeholder, entry.text, entry.like];
        targets.forEach(function(el){
          if(el){ el.style.bottom = offset + 'px'; }
        });
        placeLikeForComment(entry.text, entry.like);
        reserveTextSpace(entry.text, entry.like);
      });
    }

    function updateStackReserve(){
      if(!videoContainerEl) return;
      let extra = 0;
      for(let i=1; i<totalSlots; i++){
        extra += getSlotHeight(i) + SLOT_GAP;
      }
      const reserve = Math.max(40, Math.round(extra + 20));
      videoContainerEl.style.setProperty('--slot-stack-reserve', reserve + 'px');
    }

    function registerSlotElement(slotIdx, commentId, placeholderEl, textEl, likeEl){
      if(slotIdx >= slotHeights.length){
        const diff = slotIdx - slotHeights.length + 1;
        for(let i=0; i<diff; i++){ slotHeights.push(SLOT_DEFAULT_HEIGHT); }
      }
      const measuredHeight = Math.max(
        SLOT_MIN_HEIGHT,
        Math.round(textEl.getBoundingClientRect().height || SLOT_DEFAULT_HEIGHT)
      );
      slotHeights[slotIdx] = measuredHeight;
      slotRegistry[slotIdx] = {
        idx: commentId,
        placeholder: placeholderEl,
        text: textEl,
        like: likeEl
      };
      updateSlotPositions();
      updateStackReserve();
    }

    function releaseSlotElement(slotIdx, commentId){
      const entry = slotRegistry[slotIdx];
      if(!entry || entry.idx !== commentId) return;
      delete slotRegistry[slotIdx];
      slotHeights[slotIdx] = SLOT_DEFAULT_HEIGHT;
      updateSlotPositions();
      updateStackReserve();
    }
  </script>
</body>
</html>